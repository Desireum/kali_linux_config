define("pages/article-detail/pc/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,fetch,XMLHttpRequest,WebSocket,webkit,ttJSCore,Reporter,print,indexedDB){
 (tt["webpackJsonp"]=tt["webpackJsonp"]||[]).push([[14],{345:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJESURBVHgB7ZuNUcJAEEY/rMASrgRKYGzAEqQD7UCtQKxArEBsQEIF0kGwAaEC1705EAm55BJygbD7Zm4YNgvDPS6XvfwAiqJEpIcTgogu+eWWW38dmnCb9Xq9BaTDcgy3lPaxsXtIxo4cj5ysKAOJcMefKIwltz4kwR0eUjXkSCL/vFNGSm5CP2+4k2OqzxPOGe7gLR3OeY4icrvWkg7nDpG5wHGYcmvi379GZFoXRK7oM2gGg8i0utQgV+ilaBBehkTtQ2sjaD2hTtEx2tzFmty1NswRmVYE8egZ8kuMI84XIhNd0HreibUaf0PXYUFvFA+DLkPNVMs+XtBlyFXLMRmgy1C9VXoonSsX/uAf37cdoLgMcCwo/xyNfW9yckPPBJ4KdoE8JTc3GtSBP/jg+fKHnNyuY//gwkXzsVbzp4ItXqdFkqQLstjz296CUwU5BjyKbvI2qKAtw7ygCtpiR5HJBlXQLoNsQAXtYrIBFVSCCipBBe2yyAZU0C5757hV0JYFX0FSQQUkeUEVtOUxL6iCHHPfjaIqyDHybVBBjplvgwoCxkX3Yasg4LVoo3RBtvZJihKkC3ovS5AuaFSWIFlQEvKQjGRB45AkqYJWCJh/LFIFTXj3WoUkShX0GpooUVBaVvv8R6KgxyrJEgXNqiRLE5RUfUBYmqAxKiJJkF2YBh+9NkgSlKAGkgQ9owZSBH3mXfMKQYqgWqPHIkFQWmdy3nDOggjuAb4rNAlVu5F8RMfhp6B9c/sgz02ZiqIoiiKHXzmrWMQI3B6PAAAAAElFTkSuQmCC"},346:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(625),t),a(n(626),t)},612:function(e,t,n){e.exports={thumb:"index__thumb___2JhbN","thumb-icon":"index__thumb-icon___17r0-","points-wrapper":"index__points-wrapper___bFmCw","point-wrapper":"index__point-wrapper___2yZB8",point:"index__point___3MmFQ",background:"index__background___1Dp8h",mask:"index__mask___1hSM3",init:"index__init___12-nP",like:"index__like___1Ry_h","point-move":"index__point-move___1QOJr",expand:"index__expand___32H0n",shake:"index__shake___3j_nm",pc:"index__pc___SB8el"}},613:function(e,t,n){e.exports={container:"index__container___-y7PD",desc:"index__desc___AAe2c","left-arrow":"index__left-arrow___2A0ZB",text:"index__text___BmYcc","right-arrow":"index__right-arrow___1A0JG","like-list":"index__like-list___4aZuE",item:"index__item___2647m","show-more":"index__show-more___N0Ru3",points:"index__points___1Klak",point:"index__point___1bDXd"}},614:function(e,t,n){e.exports={"comment-area":"index__comment-area___2O-KL",focus:"index__focus___3HxI0",invalid:"index__invalid___1tQ8w","textarea-wrapper":"index__textarea-wrapper___3Hppe",seat:"index__seat___62bQN",textarea:"index__textarea___1bF3T","option-line":"index__option-line___2LPxw",limit:"index__limit___3eA07",btns:"index__btns___1Kx_8"}},615:function(e,t,n){e.exports={left:"index__left___394za",center:"index__center___3Ws5F",close:"index__close___3Yb8_","f-icon":"index__f-icon___3E0dM",unfold:"index__unfold___3K1gY","f-text":"index__f-text___2p3V6",loading:"index__loading___aXfme"}},616:function(e,t,n){e.exports={reaction:"index__reaction___ixHAd"}},617:function(e,t,n){e.exports={"reaction-users-list":"index__reaction-users-list___vRTrC","reaction-users":"index__reaction-users___3xk0A",readonly:"index__readonly___MOYrj",name:"index__name___vi_5n","name-readonly":"index__name-readonly___R4Gq3",divider:"index__divider___1QaCt",more:"index__more___3NIbB"}},618:function(e,t,n){e.exports={"nameMentioned-wraper":"index__nameMentioned-wraper___S3VPw",noMarginLeft:"index__noMarginLeft___nMUX4",active:"index__active___3kmpo"}},619:function(e,t,n){e.exports={"reaction-panel":"index__reaction-panel___1Tvn4","reaction-scrollview":"index__reaction-scrollview___9LMRM","reaction-content":"index__reaction-content___32LxL","reaction-item":"index__reaction-item___1u6PI","reaction-item-img":"index__reaction-item-img___Xu9Hp"}},620:function(e,t,n){e.exports={tool:"index__tool___5MiDT"}},621:function(e,t,n){e.exports={toolbar:"index__toolbar___1xDjp","more-tool-bar":"index__more-tool-bar___2i5-G","command-item":"index__command-item___22o9Z","thumbsup-wrapper":"index__thumbsup-wrapper___1ro_u","reaction-panel-wrapper":"index__reaction-panel-wrapper___3jXcR","show-panel":"index__show-panel___2WRi6"}},622:function(e,t,n){e.exports={container:"index__container___J5f1p",comment:"index__comment___liPB2",right:"index__right___R0xeW","decoration-line":"index__decoration-line___32al_",options:"index__options___3Xs9v",top:"index__top___14kyb",left:"index__left___zMlAk","decoration-line-left":"index__decoration-line-left___2EXjn",name:"index__name___2xwTI",default:"index__default___1U65J",desc:"index__desc___YjPAe",tag:"index__tag___GRjyY","content-line":"index__content-line___1567l","reply-wrapper":"index__reply-wrapper___3mBH0","reaction-line":"index__reaction-line___3W4Zb",small:"index__small___qdrpw",highlight:"index__highlight___1Y-0E",bgTansition:"index__bgTansition___1Nqpq","textarea-line":"index__textarea-line___3TTRK"}},623:function(e,t,n){e.exports={"comments-title":"index__comments-title___pH0H0",loading:"index__loading___3mL8j","no-more":"index__no-more___3WLYH","folder-wraper":"index__folder-wraper___1zwRp",replies:"index__replies___4wfCO","cross-line-wrapper":"index__cross-line-wrapper___1yr37",line:"index__line___3e9qf",text:"index__text___2q1I_",comment:"index__comment___3_nQQ",hidden:"index__hidden___1O6U4",open2:"index__open2___4O1dx",icon:"index__icon___1b_Oh"}},624:function(e,t,n){e.exports={"detail-comments-wrapper":"index__detail-comments-wrapper___3unBs","write-line":"index__write-line___JpFsK","avatar-wrapper":"index__avatar-wrapper___2EGVr",input:"index__input___3Kn-8",selfModule:"index__selfModule___2yBSq"}},625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editorInitStyle=void 0,t.editorInitStyle="\n body{\n     font-family: LarkHackSafariFont, LarkEmojiFont, LarkMonospacedNumbers,\n     LarkChineseQuote, -apple-system, BlinkMacSystemFont, Helvetica Neue, Arial,\n     Segoe UI, PingFang SC, Microsoft Yahei, Hiragino Sans GB, sans-serif,\n     Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;\n     font-size: 14px;\n     line-height: 1.5;\n     word-break: break-all;\n     -webkit-font-smoothing: antialiased;\n     -moz-osx-font-smoothing: grayscale;\n     padding: 0;\n     margin: 0;\n }\n img{\n     max-width: 100%;\n }\n a{\n     color: #3370FF;\n     text-decoration: none;\n }\n hr{\n     -webkit-box-sizing: content-box;\n     box-sizing: content-box;\n     display: block;\n     padding: 13px 0 12px;\n     overflow: auto;\n     height: 1px;\n     background-origin: content-box;\n     background-image: -webkit-gradient(linear,left top,right top,from(#bbbfc4),to(#bbbfc4));\n     background-image: -webkit-linear-gradient(left,#bbbfc4,#bbbfc4);\n     background-image: -o-linear-gradient(left,#bbbfc4,#bbbfc4);\n     background-image: linear-gradient(90deg,#bbbfc4,#bbbfc4);\n     background-repeat: no-repeat;\n     border: 0;\n }\n p{\n     margin: 0;\n     padding: 0;\n }\n h1, h2, h3, h4, h5, h6 {\n    font-weight: 400;\n }\n     \n"},626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoStyleManager=t.LangEnum=t.VideoResourceStatus=void 0;const i="#000000",a="#ffffff";var c,o;(function(e){e[e["Transcoding"]=1]="Transcoding",e[e["Auditing"]=2]="Auditing",e[e["Passed"]=3]="Passed",e[e["TranscodingFailed"]=4]="TranscodingFailed",e[e["AuditingFailed"]=5]="AuditingFailed"})(c=t.VideoResourceStatus||(t.VideoResourceStatus={})),function(e){e["en"]="enUs",e["zh"]="zhCn",e["jp"]="jaJp"}(o=t.LangEnum||(t.LangEnum={}));const r={[o.zh]:{[c.Transcoding]:{hint:"\u89c6\u9891\u6b63\u5728\u8f6c\u7801\uff0c\u6682\u65f6\u65e0\u6cd5\u9884\u89c8"},[c.Auditing]:{hint:"\u89c6\u9891\u6b63\u5728\u5ba1\u6838\uff0c\u6682\u65f6\u65e0\u6cd5\u9884\u89c8"},[c.TranscodingFailed]:{hint:"\u89c6\u9891\u8f6c\u7801\u5931\u8d25\uff0c\u65e0\u6cd5\u9884\u89c8"},[c.AuditingFailed]:{hint:"\u89c6\u9891\u5ba1\u6838\u5931\u8d25\uff0c\u65e0\u6cd5\u9884\u89c8"},[c.Passed]:{hint:""}},[o.en]:{[c.Transcoding]:{hint:"Being transcoded. No preview available."},[c.Auditing]:{hint:"Being reviewed. No preview available."},[c.TranscodingFailed]:{hint:"Failed to transcode. No preview available."},[c.AuditingFailed]:{hint:"Failed to review. No preview available."},[c.Passed]:{hint:""}},[o.jp]:{[c.Transcoding]:{hint:"\u30d3\u30c7\u30aa\u30c8\u30e9\u30f3\u30b9\u30b3\u30fc\u30c9\u4e2d\u306f\u30d7\u30ec\u30d3\u30e5\u30fc\u3067\u304d\u307e\u305b\u3093"},[c.Auditing]:{hint:"\u30d3\u30c7\u30aa\u5be9\u67fb\u4e2d\u306f\u30d7\u30ec\u30d3\u30e5\u30fc\u3067\u304d\u307e\u305b\u3093"},[c.TranscodingFailed]:{hint:"\u30c8\u30e9\u30f3\u30b9\u30b3\u30fc\u30c9\u306b\u5931\u6557\u3057\u305f\u305f\u3081\u3001\u30d7\u30ec\u30d3\u30e5\u30fc\u3067\u304d\u307e\u305b\u3093"},[c.AuditingFailed]:{hint:"\u30d3\u30c7\u30aa\u5be9\u67fb\u306b\u5374\u4e0b\u3055\u308c\u305f\u305f\u3081\u3001\u30d7\u30ec\u30d3\u30e5\u30fc\u3067\u304d\u307e\u305b\u3093"},[c.Passed]:{hint:""}}},l="https://p1-lark-subs.byteimg.com/tos-cn-i-21qjs0gem7/cdb721f815c14451bb3a50cbbf4658f3~tplv-21qjs0gem7-jpg.image?";class _{constructor({lang:e}){this.lang=o.zh,this.getExceptionSeat=e=>{const t=r[this.lang][e].hint;return`<div style="position:absolute;left:0;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;"><img style="width:16px;height:16px" src="${l}"/><div style="margin-left:8px;color:${a};font-size:14px;">${t}</div></div>`},this.replaceSeatWithVideo=(e,t)=>{let n=e;for(const e in t){const i=new RegExp(`<div data-videoid="${e}".*?><\\/div>`),{url:a,poster:o,status:r}=t[e];n=n.replace(i,r===c.Passed?`<video poster="${o}" src="${a}" style="position:absolute;width:100%;height:100%;left:0;top:0;outline:none;" controls="true" controlslist="nodownload" playsinline="true" webkit-playsinline="true" preload="metadata"></video>`:this.getExceptionSeat(r))}return n},this.replaceHtmlWithSeat=(e,t)=>{let n=e;for(const e of t){const t=new RegExp(`<iframe.*data-videoid="${e}".*?><\\/iframe>`,"g");n=n.replace(t,`<div style="position:relative;width:100%;height:0;padding-bottom:calc(0.5625* 100%);background-color:${i};"><div data-videoid="${e}" style="position:absolute;width:100%;height:100%;left:0;top:0;"></div></div>`)}return n},this.lang=e}}t.VideoStyleManager=_},627:function(e,t,n){e.exports={darkmodeV1:"index__darkmodeV1___BTcW4"}},628:function(e,t,n){e.exports={"ellipsis-text-wraper":"index__ellipsis-text-wraper___33UcP","ellipsis-text":"index__ellipsis-text___2TZ_m",fold:"index__fold___28j6n",hide:"index__hide___1bIDn","more-text":"index__more-text___1CbqV"}},629:function(e,t,n){e.exports={"article-video":"index__article-video___4ycPL","video-container":"index__video-container___1ZA8U",seat:"index__seat___xvLFZ",loading:"index__loading___9yd9G",spin:"index__spin___266TU",uploading:"index__uploading___2L8Q4",icon:"index__icon___3mnpI",text:"index__text___3Late",video:"index__video___1Ob6p","desc-container":"index__desc-container___3LvVI"}},630:function(e,t,n){e.exports={articleText:"index__articleText___2aBL2",img:"index__img___lyAV6",vertical:"index__vertical___3HqSI"}},631:function(e,t,n){},632:function(e,t,n){e.exports={popover:"icons__popover___3As8s",item:"icons__item___2JeZ-"}},633:function(e,t,n){e.exports={"page-detail":"index__page-detail___Idy_y","canvas-wrapper":"index__canvas-wrapper___3yNKQ",header:"index__header___30Hd-",title:"index__title___3yBXV","sub-header":"index__sub-header___pRGnh","sub-message":"index__sub-message___2C1S_","account-name":"index__account-name___T731-","author-message":"index__author-message___1bwVZ",author:"index__author___1_F0p",time:"index__time___3vVBk","follow-btn":"index__follow-btn___RdZO2","content-wraper":"index__content-wraper___l9xe_",bottom:"index__bottom___2Y5t-","read-count":"index__read-count___2Rpi3",link:"index__link___1Ufse","rc-l":"index__rc-l___3DhWR","rc-r":"index__rc-r___2Ym3z",icon:"index__icon___1bLif","invalid-error":"index__invalid-error___3VY2u",image:"index__image___xRqZo",externalError:"index__externalError___eSKTi",text:"index__text___k63yb","btn-wraper":"index__btn-wraper___y1vE5"}},664:function(e,t,n){"use strict";n.r(t);var i=n(23),a=n(4),c=n(11),o=n.n(c),r=n(2),l=n.n(r),_=n(21),s=n(1),d=n(3),u=n(13),m=n.n(u),p=n(9),b=n(14),x=n(174),h=n(48),j=function(e,t){return e.length?t?1===e.length?Object(d["e"])("ArticleDetail_LikeDescOnlySelf"):Object(d["e"])("ArticleDetail_LikeDescWithSelf",{count:e.length-1}):Object(d["e"])("ArticleDetail_LikeDesc",{count:e.length}):Object(d["e"])("ArticleDetail_LikeDescNone")},f=n(10),O=n(345),v=n.n(O),g=(n(612),n(0)),w={"./index.less":{thumb:"index__thumb___2JhbN","thumb-icon":"index__thumb-icon___17r0-","points-wrapper":"index__points-wrapper___bFmCw","point-wrapper":"index__point-wrapper___2yZB8",point:"index__point___3MmFQ",background:"index__background___1Dp8h",mask:"index__mask___1hSM3",init:"index__init___12-nP",like:"index__like___1Ry_h","point-move":"index__point-move___1QOJr",expand:"index__expand___32H0n",shake:"index__shake___3j_nm",pc:"index__pc___SB8el"}};var C=function(e){var t=e.size,n=void 0===t?60:t,i=e.isLike,a=e.onChange,c=Object(b["f"])(),l=c.data.isPC,_=Object(r["useState"])(i),d=Object(f["a"])(_,2),u=d[0],p=d[1],x=Object(r["useMemo"])((function(){return["#3370ff","#14c0ff","#00d6b9","#34c724","#f54a45","#f01d94","#d136d1","#7f3bf5"]}),[]),h=function(){a(!i)};return Object(r["useEffect"])((function(){u&&!i&&p(!1)})),Object(g["jsxs"])(s["n"],{style:{width:"".concat(n,"px"),height:"".concat(n,"px")},onClick:h,className:o()(m()("thumb",{like:i,pc:l,init:u}),w),children:[Object(g["jsx"])(s["n"],{className:"index__points-wrapper___bFmCw",style:{width:"".concat(n/3*5,"px"),left:"-".concat(n/3,"px")},children:x.map((function(e,t){return Object(g["jsx"])(s["n"],{className:"index__point-wrapper___2yZB8",style:{transform:"rotateZ(".concat(45*t,"deg)"),marginTop:"-".concat(n/20,"px"),height:"".concat(n/10,"px"),borderLeftWidth:"".concat(n/2,"px")},children:Object(g["jsx"])(s["n"],{className:"index__point___3MmFQ",style:{width:"".concat(n/10,"px"),height:"".concat(n/10,"px"),backgroundColor:e}})},e)}))}),Object(g["jsx"])(s["n"],{className:"index__background___1Dp8h"}),Object(g["jsx"])(s["n"],{className:"index__mask___1hSM3"}),Object(g["jsx"])(s["n"],{className:"index__thumb-icon___17r0-",children:i?Object(g["jsx"])(s["d"],{src:v.a,style:{width:"".concat(n/3,"px"),height:"".concat(n/3,"px")}}):Object(g["jsx"])(s["n"],{className:"iconfont icon-like",style:{fontSize:"".concat(n/3,"px"),marginBottom:"".concat(n/15,"px")}})})]})};C.options={addGlobalClass:!0};n(613);var k,y=function(e){var t=e.isLike,n=e.likeList,i=e.onChange,a=e.onDetailClick;return Object(g["jsxs"])(s["n"],{className:"index__container___-y7PD",children:[Object(g["jsx"])(C,{onChange:i,isLike:t}),Object(g["jsxs"])(s["n"],{className:"index__desc___AAe2c",children:[Object(g["jsx"])(s["n"],{className:"index__left-arrow___2A0ZB"}),Object(g["jsx"])(s["k"],{className:"index__text___BmYcc",children:j(n,t)}),Object(g["jsx"])(s["n"],{className:"index__right-arrow___1A0JG"})]}),Object(g["jsxs"])(s["n"],{className:"index__like-list___4aZuE",onClick:function(){return a()},children:[n.slice(0,4).map((function(e){return Object(g["jsx"])(s["d"],{src:e.member.avatar,className:"index__item___2647m"},e.member.id)})),n.length>4&&Object(g["jsx"])(s["n"],{className:"index__item___2647m index__show-more___N0Ru3",children:Object(g["jsxs"])(s["n"],{className:"index__points___1Klak",children:[Object(g["jsx"])(s["n"],{className:"index__point___1bDXd"}),Object(g["jsx"])(s["n"],{className:"index__point___1bDXd"}),Object(g["jsx"])(s["n"],{className:"index__point___1bDXd"})]})})]})]})},A=n(53),I=n(214),T=n(215),S=n(34),N=n(102),R=n(119),L=new R["a"];(function(e){e["OnAddComment"]="on-add-comment",e["OnReachBootom"]="on-reach-bottom",e["OnDeleteComment"]="on-delete-comment",e["OnUpdateComment"]="on-update-comment",e["OnDeleteReply"]="on-delete-reply",e["OnUpdateReply"]="on-update-reply"})(k||(k={}));var E=function(e){return L.notify(e.event,e.ctx)},M=function(e){return L.listen(e.event,e.callback)},P=function(){Object.values(k).forEach((function(e){L.unlisten(e)}))},D=n(18),F=n(25),B=(n(614),{"./index.less":{"comment-area":"index__comment-area___2O-KL",focus:"index__focus___3HxI0",invalid:"index__invalid___1tQ8w","textarea-wrapper":"index__textarea-wrapper___3Hppe",seat:"index__seat___62bQN",textarea:"index__textarea___1bF3T","option-line":"index__option-line___2LPxw",limit:"index__limit___3eA07",btns:"index__btns___1Kx_8"}});var U=function(e){var t=e.allowMentioned,n=e.defaultValue,i=void 0===n?{text:"",at:[]}:n,a=e.autoFocus,c=void 0===a||a,l=e.placeholder,_=void 0===l?"":l,u=e.maxlength,p=void 0===u?200:u,b=e.alwaysShowOptions,x=void 0===b||b,h=e.onCancel,j=e.onConfirm,O="font-size:14px;line-height:22px;color:".concat(Object(D["a"])("text-placeholder")),v=Object(F["d"])({focus:c,text:i.text||"",reminders:i.at||[],showOptions:x}),w=Object(f["a"])(v,2),C=w[0],k=w[1],y=C.focus,A=C.text,T=C.showOptions,S=C.reminders,N=function(e){e.stopPropagation();var n=A;if(t){var i=0;S.forEach((function(e){var t=e.offset,a=e.name;n=n.slice(0,t+i)+"@".concat(a)+n.slice(t+i),i=i+a.length+1}))}k({text:"",reminders:[],focus:!1,showOptions:!1}),j&&j(n,S)},R=function(e){e.stopPropagation(),k({text:"",reminders:[],focus:!1,showOptions:!1}),h&&h("")},L=A.length>p,E=L||0===A.length&&0===(null===S||void 0===S?void 0:S.length),M=Object(r["useMemo"])((function(){return x||y||""!==A?"44px":"22px"}),[x,y,A]);return Object(g["jsx"])(s["n"],{children:Object(g["jsxs"])(s["n"],{onClick:function(e){e.stopPropagation(),k({focus:!0,showOptions:!0})},className:o()(m()("comment-area",{focus:y,invalid:L}),B),children:[Object(g["jsxs"])(s["n"],{className:"index__textarea-wrapper___3Hppe",style:{minHeight:M},children:[Object(g["jsx"])(s["n"],{className:"index__seat___62bQN",children:A}),t?Object(g["jsx"])(s["c"],{className:"index__textarea___1bF3T",style:{padding:0,border:0,height:"100%",width:"100%",lineHeight:"22px"},data:T?void 0:{text:A,reminders:S},focus:y,onInput:function(e){var t=e.detail,n=t.text,i=void 0===n?"":n,a=t.reminders,c=void 0===a?[]:a;k({text:i,reminders:c})},placeholder:_,placeholderStyle:O,enableRemind:!0}):Object(g["jsx"])(s["l"],{className:"index__textarea___1bF3T",focus:y,value:A,onInput:function(e){return k({text:e.detail.value})},onBlur:function(){k({focus:!1,showOptions:x||""!==A})},style:{padding:0,border:0,pointerEvents:y?"auto":"none",color:Object(D["a"])("text-title")},placeholder:_,placeholderStyle:O,maxlength:-1})]}),T&&Object(g["jsxs"])(s["n"],{className:"index__option-line___2LPxw",onClick:function(e){return e.stopPropagation()},children:[Object(g["jsxs"])(s["n"],{className:o()(m()("limit",{invalid:L}),B),children:[A.length,"/",p]}),Object(g["jsxs"])(s["n"],{className:"index__btns___1Kx_8",children:[Object(g["jsx"])(I["a"],{type:"secondary",style:{minWidth:0,marginRight:"10px"},onClick:R,children:Object(d["e"])("Common_Cancel")}),Object(g["jsx"])(I["a"],{type:"primary",style:{minWidth:0},onClick:N,disabled:E,children:Object(d["e"])("Common_Confirm")})]})]})]})})},H=n(82),z=n(130),V=n(5),Q=(n(615),{"./index.less":{left:"index__left___394za",center:"index__center___3Ws5F",close:"index__close___3Yb8_","f-icon":"index__f-icon___3E0dM",unfold:"index__unfold___3K1gY","f-text":"index__f-text___2p3V6",loading:"index__loading___aXfme"}});var Y=function(e){var t=e.openedText,n=e.closedText,i=e.opened,a=e.onOpen,c=e.onClose,r=e.type,l=void 0===r?"center":r;return Object(g["jsxs"])(s["n"],{onClick:function(){i?c():a()},className:o()(m()("unfold",{close:i},l),Q),children:[Object(g["jsx"])(s["k"],{className:"index__f-text___2p3V6",children:i?t:n}),Object(g["jsx"])(s["n"],{className:"iconfont icon-more-arrow index__f-icon___3E0dM"})]})},q=n(75),W=n(61),X=n(175),J=(n(616),n(96)),Z=n(83);var K=function(e){var t=e.reactionType,n=e.size,i={width:"".concat(n,"px"),height:"".concat(n,"px")},a=Object(Z["a"])(t);return Object(g["jsx"])(s["n"],{style:i,className:"index__reaction___ixHAd",children:Object(g["jsx"])(s["d"],{src:a})})},G={reactionType:J["a"].THUMBSUP,size:16};K.defaultProps=G;var $=K,ee=(n(617),{"./index.less":{"reaction-users-list":"index__reaction-users-list___vRTrC","reaction-users":"index__reaction-users___3xk0A",readonly:"index__readonly___MOYrj",name:"index__name___vi_5n","name-readonly":"index__name-readonly___R4Gq3",divider:"index__divider___1QaCt",more:"index__more___3NIbB"}});var te=3,ne=function(e){var t=e.reactionList,n=void 0===t?[]:t,i=e.onClickReaction,a=e.commentId,c=e.readonly;return Object(g["jsx"])(s["n"],{className:"index__reaction-users-list___vRTrC",children:n.map((function(e){var t=e.reactionType,r=e.members,l=r.length,_=r.slice(0,te);return n.length>0&&Object(g["jsxs"])(s["n"],{className:"index__reaction-users___3xk0A",children:[Object(g["jsx"])(s["n"],{onClick:function(){c||i(t)},style:{width:"16px",height:"16px"},className:o()(c?"readonly":"",ee),children:Object(g["jsx"])($,{reactionType:t})}),Object(g["jsx"])(s["n"],{className:"index__divider___1QaCt"}),Object(g["jsxs"])(s["n"],{children:[_.map((function(e,t,n){var i=n.length===t+1,a=i?"":", ",r=Object(W["a"])(e.name)+a;return Object(g["jsx"])(s["k"],{onClick:function(t){var n=t&&t.detail||{},i=n.x,a=n.y;tt.enterProfile({openid:e.openId,left:i,top:a})},className:o()(m()("name",{"name-readonly":c}),ee),children:r},e.id)})),l>te?Object(g["jsx"])(s["k"],{className:"index__more___3NIbB",onClick:function(){Object(X["b"])({commentId:a})},children:Object(d["e"])("Common_MorePeople",{num:l})}):""]})]})}))})},ie=ne,ae=n(92),ce=n(124),oe=(n(618),{"./index.less":{"nameMentioned-wraper":"index__nameMentioned-wraper___S3VPw",noMarginLeft:"index__noMarginLeft___nMUX4",active:"index__active___3kmpo"}});function re(e){var t=e.name,n=e.openId,i=void 0===n?"":n,a=e.active,c=e.noMarginLeft,r=e.toAccount;return Object(g["jsx"])(s["n"],{onClick:function(e){r?Object(ce["a"])(i):Object(ae["c"])(e,i)},className:o()(m()("nameMentioned-wraper",{active:a,noMarginLeft:c}),oe),children:t.startsWith("@")?t:"@"+t})}var le=re,_e=n(682);n(619);var se,de=function(e){var t=e.onSelect,n=J["b"].map((function(e,t){return{type:e,img:Object(Z["a"])(e)}}));return Object(g["jsx"])(s["n"],{className:"index__reaction-panel___1Tvn4",children:Object(g["jsx"])(s["i"],{"scroll-y":!0,className:"index__reaction-scrollview___9LMRM",children:Object(g["jsx"])(s["n"],{className:"index__reaction-content___32LxL",children:n.map((function(e){return Object(g["jsx"])(s["n"],{className:"index__reaction-item___1u6PI",onClick:function(){return t(e.type)},children:Object(g["jsx"])(s["d"],{src:e.img,className:"index__reaction-item-img___Xu9Hp"})},e.type)}))})})})},ue=de;(function(e){e[e["REACTION"]=0]="REACTION",e[e["DELETE"]=1]="DELETE",e[e["EDIT"]=2]="EDIT",e[e["REPLY"]=3]="REPLY",e[e["COPY"]=4]="COPY"})(se||(se={}));var me=[{title:Object(d["e"])("ArticleDetail_Reply"),img:"icon-reply-new",value:se.REPLY,hoverColor:Object(D["a"])("primary-pri-500")},{title:Object(d["e"])("Common_Delete"),img:"icon-trash",value:se.DELETE,hoverColor:Object(D["a"])("function-danger-500")},{title:Object(d["e"])("Common_Copy"),img:"icon-line",value:se.COPY}];n(620);var pe=function(e){var t=e.img,n=e.onClick,i=e.mouseEnter,a=e.mouseLeave,c=e.first,o=e.hoverColor,l=e.hoverControl,_=void 0===l||l,d=e.hover,u=Object(F["c"])(),p=u.isHover,b=u.mouseenter,x=u.mouseleave,h=function(e){_||(a&&a(e),x(e))},j=function(e){_||(i&&i(e),b(e))},f=function(e){n&&n(e)},O=Object(r["useMemo"])((function(){var e={};return p||d?(e.color=o||Object(D["a"])("primary-pri-500"),e):e}),[p,o,d]);return Object(g["jsx"])(s["n"],{className:"index__tool___5MiDT",style:{borderLeft:c?"0px":""},onMouseEnter:j,onMouseLeave:h,onClick:f,children:Object(g["jsx"])(s["n"],{className:m()("iconfont",t),style:O})})},be=(n(621),{"./index.less":{toolbar:"index__toolbar___1xDjp","more-tool-bar":"index__more-tool-bar___2i5-G","command-item":"index__command-item___22o9Z","thumbsup-wrapper":"index__thumbsup-wrapper___1ro_u","reaction-panel-wrapper":"index__reaction-panel-wrapper___3jXcR","show-panel":"index__show-panel___2WRi6"}});var xe,he,je,fe=function(e){var t=e.triggerEvent,n=e.actions,i=Object(b["f"])(),a=i.data.isDark,c=n.includes(se.REACTION),l=Object(r["useMemo"])((function(){return me.filter((function(e){return n.includes(e.value)}))}),[n,a]),_=Object(F["c"])(),d=_.isHover,u=_.mouseenter,p=_.mouseleave;function x(e){t({event:se.REACTION,data:e})}return Object(g["jsxs"])(s["n"],{className:"index__toolbar___1xDjp",children:[c&&Object(g["jsxs"])(s["n"],{className:"index__thumbsup-wrapper___1ro_u",onMouseEnter:u,onMouseLeave:p,children:[Object(g["jsx"])(pe,{img:"icon-thumbsup",hoverControl:!0,hoverColor:Object(D["a"])("primary-pri-500"),hover:d,onClick:function(){return t({event:se.REACTION,data:J["a"].THUMBSUP})},first:!0}),d&&Object(g["jsx"])(s["n"],{className:o()(m()("reaction-panel-wrapper",{}),be),children:Object(g["jsx"])(ue,{onSelect:x})})]}),l.map((function(e,n){var i=e.title,a=e.img,c=e.value,o=e.hoverColor;return Object(g["jsx"])(T["a"],{text:i,placement:"top",preventEvents:!0,children:Object(g["jsx"])(pe,{img:a,onClick:function(){return t({event:c})},hoverColor:o,hoverControl:!1})},"".concat(c," + ").concat(n))}))]})},Oe=fe,ve=n(7),ge=n.n(ve),we=n(12),Ce=n(20),ke=n(27),ye=l.a.createContext({isPreview:!1,loading:!1,articleReady:!1,trace:{},article:{},articleContent:{},accountId:"",onArticleReady:ke["noop"],subscribeEventUniqueId:"",accountType:V["b"].Subscriptions,setState:ke["noop"]}),Ae=n(176),Ie=l.a.createContext({user:{},articleId:"",account:{},addComment:function(){return Promise.resolve()},deleteComment:function(){return ke["noop"]},updateComment:function(){return Promise.resolve()}}),Te=l.a.createContext({showSelected:!1,allowMentioned:!1,allowSecondaryMessageReply:!1,allowReply:!1,getReplyPlaceholder:function(e){return e},commentIdPrefix:""});(function(e){e[e["self"]=0]="self",e[e["sift"]=1]="sift",e[e["reply"]=2]="reply"})(je||(je={}));var Se,Ne=(xe={},Object(a["a"])(xe,je.self,{initPageSize:3,pageSize:15}),Object(a["a"])(xe,je.sift,{initPageSize:15,pageSize:15}),Object(a["a"])(xe,je.reply,{initPageSize:5,pageSize:15}),xe);(function(e){e[e["self"]=0]="self",e[e["sift"]=1]="sift"})(Se||(Se={}));var Re=(he={},Object(a["a"])(he,Se.self,{frontSize:2,initPageSize:3}),Object(a["a"])(he,Se.sift,{frontSize:2,initPageSize:15}),he),Le="anchor-comment-",Ee=function(e){var t=e.active,n=e.comment,i=e.parentComment,a=e.setActiveCommentId,c=e.highlight,o=Object(r["useState"])(""),l=Object(f["a"])(o,2),_=l[0],s=l[1],u=Object(b["f"])(),m=u.data.isPC,x=Object(r["useContext"])(ye),h=x.subscribeEventUniqueId,j=Object(r["useContext"])(Ie),O=j.user,v=j.account,g=j.updateComment,w=j.deleteComment,C=j.addComment,k=Object(r["useContext"])(Te),y=k.showSelected,A=k.allowReply,I=k.allowMentioned,T=k.allowSecondaryMessageReply,S=k.getReplyPlaceholder,N=k.commentIdPrefix,R=Object(r["useCallback"])((function(e){var c=n.id,o=(null===i||void 0===i?void 0:i.id)||"",r=e.event,l=e.data;switch(r){case se.DELETE:w(c,o);break;case se.REPLY:a(t?"":c);break;case se.REACTION:var _=l;Object(Z["b"])({reactionType:_,comment:n,user:O}).then((function(e){g(e,o)}));break;case se.COPY:p["a"].setClipboardData({data:n.content}).then((function(){Object(Ce["l"])({title:Object(d["e"])("Common_Copied")})}));default:break}}),[n,t]),L=Object(r["useMemo"])((function(){if(!n)return[];var e=n.updateUser,t=n.isAuthor,a=[se.REACTION];return m||a.push(se.COPY),e.id!==O.id||t||a.push(se.DELETE),A&&(!T&&t&&(null===i||void 0===i?void 0:i.updateUser.id)===O.id||T)&&a.push(se.REPLY),a}),[n,O.id]),E=Object(r["useMemo"])((function(){var e=[],t=n.isSetSelected,i=n.isSetTop,a=n.isAuthor;return i&&e.push({type:"setTop",text:Object(d["e"])("ArticleDetail_CommentStick"),color:"blue"}),y&&!a&&e.push(t?{type:"selected",text:Object(d["e"])("ArticleDetail_CommentSiftTag"),color:"orange"}:{type:"unSeleted",text:Object(d["e"])("ArticleDetail_CommentNotSift"),color:"neutral"}),e}),[n]),M=function(){a("")},P=function(){var e=Object(we["a"])(ge.a.mark((function e(t,i){return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s(t),!(t.length>200)){e.next=4;break}return Object(Ce["l"])({icon:"error",title:Object(d["e"])("ArticleDetail_OverLength",{num:200})}),e.abrupt("return");case 4:return e.prev=4,e.next=7,C({content:t,at:i},n.id);case 7:Object(Ce["l"])({title:Object(d["e"])("AccountList_SuccessfulOperation")}),M(),s(""),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](4),Object(Ce["l"])({icon:"error",title:Object(d["e"])("Common_RequestFailed")});case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(e){s(m?"":e),M()},F="".concat(Object(W["a"])(v.name),"(").concat(Object(d["e"])("ArticleDetail_CommentAuthor"),")");return Object(r["useEffect"])((function(){var e;return c&&(e=setTimeout((function(){Object(Ce["g"])("#".concat(Le).concat(n.id)).then((function(e){if(e){var t=e.top-100;m?Object(Ae["b"])(h,{scrollTop:t}):p["a"].pageScrollTo({scrollTop:t})}}))}),300)),function(){e&&clearTimeout(e)}}),[]),{actions:L,user:O,triggerEvent:R,submitComment:P,cancelComment:D,replyText:_,name:n.isAuthor?F:Object(W["a"])(n.updateUser.name),avatar:n.isAuthor?v.avatar:n.updateUser.avatar,timeText:Object(Ce["h"])(n.updateTime),tags:E,allowMentioned:I,replyPlaceholder:S(n.isAuthor?"".concat(Object(W["a"])(v.name),"\uff08").concat(Object(d["e"])("ArticleDetail_CommentAuthor"),"\uff09"):Object(W["a"])(n.updateUser.name)),commentIdPrefix:N,authorName:F,account:v,handleClickName:function(e){n.isAuthor?Object(ce["a"])("".concat(v.id)):Object(Ce["j"])(e,n.updateUser.openId)}}};function Me(e){var t=e.content,n=e.actInfos,i=e.user;if(!n.length)return Object(g["jsx"])(r["Fragment"],{children:t});var a=Object.assign([],n).sort((function(e,t){return Number(e.offset)-Number(t.offset)})),c=t.split(new RegExp(a.map((function(e){return"".concat(e.name.startsWith("@")?e.name:"@"+e.name)})).join("|")));return Object(g["jsx"])(r["Fragment"],{children:c.map((function(e,t){var n=a.shift();return Object(g["jsxs"])(r["Fragment"],{children:[e,n?Object(g["jsx"])(le,{name:n.name,openId:n.openId,active:n.openId===i.openId,noMarginLeft:0===t&&!e}):null]})}))})}var Pe=Me,De=(n(622),{"./index.less":{container:"index__container___J5f1p",comment:"index__comment___liPB2",right:"index__right___R0xeW","decoration-line":"index__decoration-line___32al_",options:"index__options___3Xs9v",top:"index__top___14kyb",left:"index__left___zMlAk","decoration-line-left":"index__decoration-line-left___2EXjn",name:"index__name___2xwTI",default:"index__default___1U65J",desc:"index__desc___YjPAe",tag:"index__tag___GRjyY","content-line":"index__content-line___1567l","reply-wrapper":"index__reply-wrapper___3mBH0","reaction-line":"index__reaction-line___3W4Zb",small:"index__small___qdrpw",highlight:"index__highlight___1Y-0E",bgTansition:"index__bgTansition___1Nqpq","textarea-line":"index__textarea-line___3TTRK"}});var Fe=function(e){var t=e.active,n=e.parentComment,i=e.highlight,a=e.comment,c=Ee(e),r=c.tags,l=c.name,_=c.user,u=c.avatar,p=c.timeText,b=c.actions,x=c.triggerEvent,h=c.submitComment,j=c.cancelComment,f=c.allowMentioned,O=c.replyPlaceholder,v=c.commentIdPrefix,w=c.authorName,C=c.account,k=c.handleClickName,y=a.reactionList,A=a.id,I=a.parentCommentUpdateUser,T=a.actInfos,S=a.content,N=a.updateUser,R=null===n||void 0===n?void 0:n.id;return Object(g["jsxs"])(s["n"],{className:"index__container___J5f1p",id:"".concat(v).concat(a.id),children:[Object(g["jsxs"])(s["n"],{className:o()(m()("comment",{small:!!n,highlight:i}),De),children:[Object(g["jsxs"])(s["n"],{className:"index__top___14kyb",children:[Object(g["jsx"])(s["n"],{className:"index__left___zMlAk",children:Object(g["jsx"])(H["a"],{size:R?20:32,url:u,openId:a.isAuthor?"".concat(C.id):N.openId,enableProfile:!a.isAuthor,toAccount:a.isAuthor})}),Object(g["jsxs"])(s["n"],{className:"index__right___R0xeW",children:[Object(g["jsxs"])(s["n"],{className:"index__decoration-line___32al_",children:[Object(g["jsxs"])(s["n"],{className:"index__decoration-line-left___2EXjn",children:[Object(g["jsx"])(s["k"],{className:"index__name___2xwTI",onClick:k,children:l}),r.map((function(e){return Object(g["jsx"])(s["n"],{className:o()(m()("tag"),De),children:Object(g["jsx"])(_e["a"],{color:e.color,text:e.text})},e.type)})),Object(g["jsx"])(s["k"],{className:"index__desc___YjPAe",children:p})]}),Object(g["jsx"])(s["n"],{className:"index__options___3Xs9v",children:Object(g["jsx"])(Oe,{triggerEvent:x,actions:b})})]}),Object(g["jsxs"])(s["n"],{className:"index__content-line___1567l",children:[I&&I.user?Object(g["jsxs"])(s["n"],{className:"index__reply-wrapper___3mBH0",children:[Object(d["e"])("ArticleDetail_CommentReply"),Object(g["jsx"])(le,{name:I.isAuthor?w:Object(W["a"])(I.user.name),openId:I.isAuthor?"".concat(C.id):I.user.openId,active:I.user.id===_.id&&!I.isAuthor,toAccount:I.isAuthor}),":\xa0\xa0"]}):null,Object(g["jsx"])(Pe,{actInfos:T,content:S,user:_})]})]})]}),null!==y&&void 0!==y&&y.length?Object(g["jsx"])(s["n"],{className:"index__reaction-line___3W4Zb",children:Object(g["jsx"])(ie,{commentId:A,reactionList:y,onClickReaction:function(e){return x({event:se.REACTION,data:e})}})}):null]}),t&&Object(g["jsx"])(s["n"],{className:"index__textarea-line___3TTRK",children:Object(g["jsx"])(U,{allowMentioned:f,onConfirm:h,onCancel:j,placeholder:O})})]})},Be=Fe,Ue=function(e){var t=e.title,n=e.underLineText,i=e.defaultShowCount,c=e.pageSize,o=e.loadDataMethod,l=void 0===o?"folder":o,_=e.loadComments,s=e.comments,u=e.parentComment,m=e.anchorCommentId,p=e.getCommentsInAnchorMode,b=Object(r["useRef"])(0),x=Object(F["d"])({inited:!1,showCount:i,activeCommentId:"",folderOpened:!1,showFolder:!1,loading:!1,hasMore:!0,frontHasMore:!1,loadingInCenter:!1}),h=Object(f["a"])(x,2),j=h[0],O=h[1],v=function(){var e=Object(we["a"])(ge.a.mark((function e(t,n){var o,r,d;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=n?"loadingInCenter":"loading",r=function(){var e,n=t?j.showCount:j.showCount+(c||i),r=n<s.length,l=(e={showCount:n>s.length?s.length:n,hasMore:r},Object(a["a"])(e,o,!1),Object(a["a"])(e,"folderOpened",!r),Object(a["a"])(e,"showFolder",t&&r||!t),e);t&&(l.inited=!0),O(l)},d=function(){var e=Object(we["a"])(ge.a.mark((function e(){var i,c,r,s,d;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===_||void 0===_?void 0:_(t,n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={comments:[],hasMore:!1};case 5:c=e.t0,r=c.comments,s=c.hasMore,i={showCount:r.length,folderOpened:!s},Object(a["a"])(i,o,!1),Object(a["a"])(i,"hasMore",s),Object(a["a"])(i,"frontHasMore",!n&&j.frontHasMore),d=i,t?(d.showFolder=!!s,d.inited=!0):d.showFolder="folder"===l||"scroll"===l&&!s,O(d);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t||O(Object(a["a"])({},o,!0));try{u?r():_&&d()}catch(e){O(Object(a["a"])({},o,!1))}case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){O({showCount:i,folderOpened:!1})},w=function(){j.hasMore?v(!1):O({showCount:s.length,folderOpened:!0})},C=function(){var e=j.showFolder,t=j.hasMore,n=j.loading;!t||e||n||v(!1)},y=Object(r["useMemo"])((function(){return{}}),[]);Object.assign(y,{scrollLoad:C});var A=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n,a,c,o,r,l;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!m){e.next=25;break}if(!u){e.next=7;break}return t=s.map((function(e){return e.id})).includes(m),n=t?1/0:j.showCount,a=n<s.length,O({showFolder:a||t&&s.length>i,folderOpened:!a,showCount:n,hasMore:a}),e.abrupt("return");case 7:return e.prev=7,e.next=10,null===p||void 0===p?void 0:p();case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={frontHasMore:!1,backHasMore:!1};case 13:c=e.t0,o=c.frontHasMore,r=c.backHasMore,O({frontHasMore:o,hasMore:r,showFolder:r}),e.next=23;break;case 19:e.prev=19,e.t1=e["catch"](7),l=e.t1.code,110401===l&&(Object(Ce["l"])({title:Object(d["e"])("ArticleDetail_CommentDelete"),icon:"error"}),v(!0));case 23:e.next=26;break;case 25:v(!0);case 26:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(){return e.apply(this,arguments)}}(),I=Object(F["a"])((function(){j.inited&&y.scrollLoad()}));return Object(r["useEffect"])((function(){return"scroll"===l&&M({event:k.OnReachBootom,callback:I}),A(),function(){P()}}),[]),Object(r["useEffect"])((function(){if(Math.abs(b.current-s.length)>1)b.current=s.length;else{b.current=s.length;var e=j.showFolder,t=j.showCount;O({showFolder:!(s.length<=i)&&e,showCount:t<s.length?s.length:t})}}),[s.length]),{showCount:j.showCount,activeCommentId:j.activeCommentId,setActiveCommentId:function(e){O({activeCommentId:e})},title:s.length>0?t:"",underLineText:s.length>0?n:"",loading:j.loading,showFolder:!j.loading&&j.showFolder,folderOpened:j.folderOpened,onClose:g,onOpen:w,frontHasMore:!j.loadingInCenter&&j.frontHasMore,loadingInCenter:j.loadingInCenter,handleLoadCommentsInCenter:function(){v(!1,!0)}}},He=(n(623),{"./index.less":{"comments-title":"index__comments-title___pH0H0",loading:"index__loading___3mL8j","no-more":"index__no-more___3WLYH","folder-wraper":"index__folder-wraper___1zwRp",replies:"index__replies___4wfCO","cross-line-wrapper":"index__cross-line-wrapper___1yr37",line:"index__line___3e9qf",text:"index__text___2q1I_",comment:"index__comment___3_nQQ",hidden:"index__hidden___1O6U4",open2:"index__open2___4O1dx",icon:"index__icon___1b_Oh"}});var ze=function e(t){var n=t.parentComment,i=t.anchorCommentId,a=t.frontComments,c=void 0===a?[]:a,l=t.comments,_=Ue(t),u=_.title,p=_.underLineText,b=_.loading,x=_.showFolder,h=_.folderOpened,j=_.onClose,f=_.onOpen,O=_.activeCommentId,v=_.setActiveCommentId,w=_.showCount,C=_.frontHasMore,k=_.loadingInCenter,y=_.handleLoadCommentsInCenter;return 0===l.length&&0===c.length?null:Object(g["jsxs"])(s["n"],{children:[u?Object(g["jsx"])(s["n"],{className:"index__comments-title___pH0H0",children:u}):null,Object(g["jsxs"])(s["n"],{children:[c.map((function(t){return Object(g["jsxs"])(s["n"],{onClick:function(e){e.stopPropagation()},className:"index__comment___3_nQQ",children:[Object(g["jsx"])(Be,{comment:t,active:O===t.id,setActiveCommentId:v,parentComment:n,highlight:i===t.id},t.id),!!t.replies.length&&Object(g["jsx"])(e,{parentComment:t,defaultShowCount:Ne[je.reply].initPageSize,pageSize:Ne[je.reply].pageSize,comments:t.replies,anchorCommentId:i})]},"comment-".concat(t.id))})),n?null:Object(g["jsxs"])(r["Fragment"],{children:[k?Object(g["jsx"])(s["n"],{className:"index__loading___3mL8j",children:Object(g["jsx"])(q["a"],{})}):null,C?Object(g["jsxs"])(s["n"],{className:"index__open2___4O1dx",onClick:y,children:[Object(d["e"])("ArticleDetail_CommentUnFolderAllComments"),Object(g["jsx"])(s["n"],{className:"iconfont icon-folder index__icon___1b_Oh"})]}):null]}),l.map((function(t,a){return Object(g["jsxs"])(s["n"],{onClick:function(e){e.stopPropagation()},className:o()(m()("comment",{hidden:a+1>w}),He),children:[Object(g["jsx"])(Be,{comment:t,active:O===t.id,setActiveCommentId:v,parentComment:n,highlight:i===t.id},t.id),!!t.replies.length&&Object(g["jsx"])(e,{parentComment:t,defaultShowCount:Ne[je.reply].initPageSize,pageSize:Ne[je.reply].pageSize,comments:t.replies,anchorCommentId:i})]},"comment-".concat(t.id))}))]}),x?Object(g["jsx"])(s["n"],{className:o()(m()("folder-wraper",{replies:!!n}),He),children:Object(g["jsx"])(Y,{opened:h,onClose:j,onOpen:f,type:n?"left":"center",closedText:n?Object(d["e"])("ArticleDetail_CommentUnFolderMoreReplies"):Object(d["e"])("ArticleDetail_CommentUnFolderMoreComments"),openedText:n?Object(d["e"])("ArticleDetail_CommentFolderAllReplies"):Object(d["e"])("ArticleDetail_CommentFolderAllComments2")})}):null,b?Object(g["jsx"])(s["n"],{className:"index__loading___3mL8j",children:Object(g["jsx"])(q["a"],{})}):null,p?Object(g["jsxs"])(s["n"],{className:"index__cross-line-wrapper___1yr37",children:[Object(g["jsx"])(s["n"],{className:"index__line___3e9qf"}),Object(g["jsx"])(s["n"],{className:"index__text___2q1I_",children:Object(d["e"])("ArticleDetail_CommentSiftedDesc")})]}):null]})},Ve=ze,Qe=n(6),Ye=n(19),qe=n(8),We=n(17);function Xe(e){var t=e.articleId,n=e.initPageSize,i=e.pageSize,a=e.getCommentsByArticleId,c=e.mode,o=void 0===c?"normal":c,r=e.getCommentsWithCommentId,l=e.reportEventName,_=void 0===l?"":l,s=Object(F["d"])({pageToken:"",comments:[]}),d=Object(f["a"])(s,2),u=d[0],m=d[1],p=Object(F["d"])({frontComments:[],frontPageToken:"",backComments:[],backPageToken:""}),b=Object(f["a"])(p,2),x=b[0],h=b[1],j=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n,i,a,c,o,l,s;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Date.now(),e.next=3,null===r||void 0===r?void 0:r();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={frontComments:[],frontHasMore:!1,frontPageToken:"",backComments:[],backPageToken:"",backHasMore:!1};case 6:return n=e.t0,i=n.frontComments,a=n.frontHasMore,c=n.frontPageToken,o=n.backComments,l=n.backPageToken,s=n.backHasMore,_&&Object(qe["Q"])(_,{time:Date.now()-t}),h({frontComments:i,frontPageToken:c,backComments:o,backPageToken:l}),e.abrupt("return",{frontComments:i,backComments:o,frontHasMore:a,backHasMore:s});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(we["a"])(ge.a.mark((function e(c,r){var l,s,d,p,b,j,f;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=Date.now(),s="normal"===o?u.pageToken:r?x.frontPageToken:x.backPageToken,e.next=4,a({articleId:t,size:c?n:i,pageToken:s});case 4:return d=e.sent,p=d.hasMore,b=d.pageToken,j=d.comments,c&&_&&Object(qe["Q"])(_,{time:Date.now()-l}),f=[],"normal"===o?(f=[].concat(Object(We["a"])(u.comments),Object(We["a"])(j)),m({comments:f,pageToken:b})):(f=r?j:[].concat(Object(We["a"])(x.backComments),Object(We["a"])(j)),h({backComments:f,backPageToken:b})),e.abrupt("return",{comments:f,hasMore:p});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("normal"===o){var n=u.comments,i=e(n),a=!Object(ke["isEqual"])(n,i);a&&m({comments:i})}else{var c=x.frontComments,r=x.backComments,l=e(c),_=t?r:e(r),s=!Object(ke["isEqual"])(l,c)||!Object(ke["isEqual"])(_,r);s&&h({frontComments:l,backComments:_})}},g=function(){var e=Object(we["a"])(ge.a.mark((function e(t,n){var i;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=function(e){if(n)return e.map((function(e){var i=e.replies.map((function(e){return e.id})).includes(n)||n===e.id;return i?Object(Qe["a"])(Object(Qe["a"])({},e),{},{replies:[].concat(Object(We["a"])(e.replies),[t])}):e}));var i=e.filter((function(e){return e.isSetTop})),a=e.filter((function(e){return!e.isSetTop}));return[].concat(Object(We["a"])(i),[t],Object(We["a"])(a))},v(i,!n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(we["a"])(ge.a.mark((function e(t,n){var i;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=function(e){return n?e.map((function(e){var n=e.replies.filter((function(e){return e.id!==t}));return Object(Qe["a"])(Object(Qe["a"])({},e),{},{replies:n})})):e.filter((function(e){return e.id!==t}))},v(i);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(we["a"])(ge.a.mark((function e(t,n){var i;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=function(e){return n?e.map((function(e){return Object(Qe["a"])(Object(Qe["a"])({},e),{},{replies:e.replies.map((function(e){return e.id===t.id?t:e}))})})):e.map((function(e){return e.id===t.id?t:e}))},v(i);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{comments:JSON.parse(JSON.stringify(u.comments)),loadComments:O,frontComments:JSON.parse(JSON.stringify(x.frontComments)),backComments:JSON.parse(JSON.stringify(x.backComments)),getCommentsInAnchorMode:j,addComment:g,deleteComment:w,updateComment:C}}var Je=Xe,Ze=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=Je({articleId:e,initPageSize:Ne[je.self].initPageSize,pageSize:Ne[je.self].pageSize,mode:n?"anchorMode":"normal",reportEventName:n?qe["y"]:qe["z"],getCommentsByArticleId:function(){var e=Object(we["a"])(ge.a.mark((function e(t){var n,i;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ye["a"].getUserCommentAboutArticle(t);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getCommentsWithCommentId:function(){var i=Object(we["a"])(ge.a.mark((function i(){var a,c;return ge.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Ye["a"].anchorFrontComment({articleId:e,commentDisplayType:t,commentId:n,frontSize:Re[Se.self].frontSize,pageSize:Re[Se.self].initPageSize});case 2:return a=i.sent,c=a.data,i.abrupt("return",c);case 5:case"end":return i.stop()}}),i)})));function a(){return i.apply(this,arguments)}return a}()}),a=Je({articleId:e,initPageSize:Ne[je.sift].initPageSize,pageSize:Ne[je.sift].pageSize,mode:t==V["e"].AllComment&&n?"anchorMode":"normal",reportEventName:t===V["e"].SelectedComment?qe["A"]:n?qe["y"]:qe["x"],getCommentsByArticleId:function(){var e=Object(we["a"])(ge.a.mark((function e(n){var i,a;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ye["a"].getFrontArticleCommentList(Object(Qe["a"])({commentDisplayType:t},n));case 2:return i=e.sent,a=i.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}(),getCommentsWithCommentId:function(){var i=Object(we["a"])(ge.a.mark((function i(){var a,c;return ge.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Ye["a"].anchorFrontComment({articleId:e,commentDisplayType:t,commentId:n,frontSize:Re[Se.sift].frontSize,pageSize:Re[Se.sift].initPageSize});case 2:return a=i.sent,c=a.data,i.abrupt("return",c);case 5:case"end":return i.stop()}}),i)})));function a(){return i.apply(this,arguments)}return a}()}),c=Object(F["d"])({text:""}),o=Object(f["a"])(c,2),r=o[0],l=o[1],_=Object(b["f"])(),s=_.data.isPC,u=function(){var n=Object(we["a"])(ge.a.mark((function n(c,o){var r,l;return ge.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Object(qe["Q"])(qe["l"],{type:o?1:0,articleId:e}),n.next=3,Ye["a"].addCommentByUser({comment:c.content,actInfos:(c.at||[]).map((function(e){return{openId:e.id,offset:e.offset,name:e.name,avatar:""}})),articleId:e,parentCommentId:o});case 3:r=n.sent,l=r.data,t===V["e"].SelectedComment&&i.addComment(l.comment,o),t===V["e"].AllComment&&a.addComment(l.comment,o);case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),m=function(){var n=Object(we["a"])(ge.a.mark((function n(c,o){return ge.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ye["a"].deleteCommentByUser({articleId:e,commentId:c});case 3:Object(Ce["l"])({title:Object(d["e"])("AccountList_SuccessfulOperation")}),t===V["e"].SelectedComment&&i.deleteComment(c,o),a.deleteComment(c,o),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),Object(Ce["l"])({icon:"error",title:Object(d["e"])("Common_RequestFailed")});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}(),p=function(){var e=Object(we["a"])(ge.a.mark((function e(n,c){return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t===V["e"].SelectedComment&&i.updateComment(n,c),a.updateComment(n,c);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(we["a"])(ge.a.mark((function e(t,n){return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l({text:t}),!(t.length>200)){e.next=4;break}return Object(Ce["l"])({icon:"error",title:Object(d["e"])("ArticleDetail_OverLength",{num:200})}),e.abrupt("return");case 4:return e.prev=4,e.next=7,u({content:t,at:n},"");case 7:l({text:""}),Object(Ce["l"])({title:Object(d["e"])("AccountList_SuccessfulOperation")}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),Object(Ce["l"])({icon:"error",title:Object(d["e"])("Common_RequestFailed")});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n){return e.apply(this,arguments)}}(),h=function(e){l({text:s?"":e})};return{text:r.text,onCommentSubmit:x,onCommentCancel:h,serviceForSelfModule:i,serviceForShowModule:a,addComment:u,deleteComment:m,updateComment:p}};n(624);var Ke=function(e){var t=e.user,n=e.account,i=e.article,a=i.id,c=i.commentDisplayType,o=e.activeCommentId,l=Ze(a,c,o),_=l.onCommentSubmit,u=l.serviceForSelfModule,m=l.serviceForShowModule,p=l.addComment,b=l.deleteComment,x=l.updateComment,h=function(e,t){z["a"].Confirm({title:Object(d["e"])("AccountDetail_ConfirmDeleteComment"),icon:"warning",okTxt:Object(d["e"])("Common_Delete")}).then((function(n){n.success&&b(e,t)}))},j=c===V["e"].AllComment;return Object(g["jsx"])(Ie.Provider,{value:{user:t,articleId:a,account:n,addComment:p,deleteComment:h,updateComment:x},children:Object(g["jsxs"])(s["n"],{className:"index__detail-comments-wrapper___3unBs",children:[Object(g["jsxs"])(s["n"],{className:"index__write-line___JpFsK",children:[Object(g["jsx"])(s["n"],{className:"index__avatar-wrapper___2EGVr",children:Object(g["jsx"])(H["a"],{url:t.avatar,openId:t.openId,enableProfile:!0})}),Object(g["jsx"])(s["n"],{className:"index__input___3Kn-8",children:Object(g["jsx"])(U,{allowMentioned:j,autoFocus:!1,onConfirm:_,placeholder:j?Object(d["e"])("ArticleDetail_CommentPlaceholder"):Object(d["e"])("ArticleDetail_SelectedCommentPlaceholder"),alwaysShowOptions:!1})})]}),c===V["e"].SelectedComment?Object(g["jsxs"])(r["Fragment"],{children:[Object(g["jsx"])(s["n"],{className:"index__selfModule___2yBSq",children:Object(g["jsx"])(Te.Provider,{value:{showSelected:!0,allowReply:!0,allowSecondaryMessageReply:!1,allowMentioned:!1,getReplyPlaceholder:function(e){return Object(d["e"])("ArticleDetail_SelectedReplyPlaceholder",{name:e})},commentIdPrefix:Le},children:Object(g["jsx"])(Ve,{underLineText:Object(d["e"])("ArticleDetail_CommentSiftedDesc"),defaultShowCount:Ne[je.self].initPageSize,loadDataMethod:"folder",frontComments:u.frontComments,comments:o?u.backComments:u.comments,loadComments:u.loadComments,anchorCommentId:o,getCommentsInAnchorMode:u.getCommentsInAnchorMode})})}),Object(g["jsx"])(Te.Provider,{value:{showSelected:!1,allowReply:!1,allowSecondaryMessageReply:!1,allowMentioned:!1,getReplyPlaceholder:function(e){return Object(d["e"])("ArticleDetail_SelectedReplyPlaceholder",{name:e})},commentIdPrefix:""},children:Object(g["jsx"])(Ve,{title:Object(d["e"])("ArticleDetail_CommentSift"),defaultShowCount:Ne[je.sift].initPageSize,loadDataMethod:"scroll",anchorCommentId:"",frontComments:[],comments:m.comments,loadComments:m.loadComments})})]}):null,c===V["e"].AllComment?Object(g["jsx"])(Te.Provider,{value:{showSelected:!1,allowReply:!0,allowSecondaryMessageReply:!0,allowMentioned:!0,getReplyPlaceholder:function(e){return Object(d["e"])("ArticleDetail_ReplyPlaceholder",{name:e})},commentIdPrefix:Le},children:Object(g["jsx"])(Ve,{title:Object(d["e"])("ArticleDetail_CommentAll"),defaultShowCount:Ne[je.sift].initPageSize,loadDataMethod:"scroll",anchorCommentId:o,frontComments:m.frontComments,comments:o?m.backComments:m.comments,loadComments:m.loadComments,getCommentsInAnchorMode:m.getCommentsInAnchorMode})}):null]})})},Ge=n(99),$e=n(63);function et(e){var t=e.className,n=e.contents,i=e.plugins,a=void 0===i?[]:i,c=e.style,o=void 0===c?{}:c,_=e.placeholder,s=e.readOnly,d=e.autoHeight,u=e.aditStyle,m=e.onInput,p=e.onInsertImage,b=e.onReady,x=e.onEditorClick,h=e.onGetFileInfo,j=e.eventName,f=void 0===j?"editorNativeEvent":j,O=e.onUploadPasteImage;return l.a.createElement(r["Fragment"],null,l.a.createElement("native-editor",{eventName:f,customClass:t,contents:n,plugins:a,customStyle:Object($e["b"])(o),placeholder:_,readOnly:s,autoHeight:d,aditStyle:u,onInput:m,onInsertimage:p,onReady:b,onEditorclick:x,onGetfileinfo:h,onUploadpasteimage:O}))}var nt=et,it=n(15);function at(e){var t=e.contents,n=e.readOnly,i=e.plugins,a=e.autoHeight,c=e.previewImg,o=void 0===c||c,l=e.onReady,_=Object(r["useState"])(!1),s=Object(f["a"])(_,2),d=s[0],u=s[1],m=function(e){Object(it["c"])("articleEditorClick");var t=e.target.detail;"A"===t.nodeName&&t.value&&(Object(it["c"])("articleEditorClickLink"),p["a"].openSchema({schema:t.value,external:!1}).then((function(){Object(it["c"])("articleEditorClickLinkSuccess")})).catch((function(){Object(it["c"])("articleEditorClickLinkSuccess")}))),o&&"IMG"===t.nodeName&&t.value&&(Object(it["c"])("articleEditorClickImg"),p["a"].previewImage({urls:[t.value],current:t.value}).then((function(){Object(it["c"])("articleEditorImgPreviewSuccess")})).catch((function(){Object(it["c"])("articleEditorImgPreviewFail")})))};return Object(g["jsx"])(nt,{readOnly:n,contents:d?t:"",plugins:i,autoHeight:a,onReady:function(){l(),u(!0)},onEditorClick:m})}var ct=at,ot=n(346),rt=n(32),lt=n(54),_t=n(184),st=new _t["a"],dt=function(){var e=Object(b["b"])(),t=e.data.enableDarkmodeV2,n=Object(b["f"])(),i=n.data.isDark;return{convert:function(e){if(console.log("cc",i,t),!i)return"";if(!t)return"";var n=st.convert(e),a=n.html,c=n.cost;return Object(qe["Q"])("darkmode_parse_cost",{cost:c}),a}}},ut=new ot["VideoStyleManager"]({lang:Object(d["d"])()}),mt=function(){var e=Object(r["useContext"])(ye),t=e.article,n=t.relatedResource,i=void 0===n?[]:n,a=t.id,c=e.articleContent,o=e.accountId,l=e.trace,_=e.loading,s=e.articleReady,d=e.accountType,u=e.onArticleReady,m=Object(F["d"])({renderType:"rich-text",uhtml:"",darkUhtml:"",inited:!1}),p=Object(f["a"])(m,2),x=p[0],h=p[1],j=dt(),O=j.convert,v=Object(b["b"])(),g=v.data.enableDarkmodeV2,w=Object(b["f"])(),C=w.data,k=C.systemInfo,y=C.isDark;Object(r["useEffect"])((function(){var e=c.body;e&&"{}"!==JSON.stringify(e)&&(e.uhtml?(Object(it["c"])("articleRichTextReady",{},l),h({renderType:"rich-text"}),u()):e.html&&(Object(it["c"])("articleEditorReady",{},l),h({renderType:"editor"})))}),[c]),Object(r["useEffect"])((function(){!_&&k&&"devtools"===k.brand&&u()}),[_,k]);var A=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(i.map((function(e){return Ye["a"].getPlayInfo({videoId:e})})));case 2:return t=e.sent.reduce((function(e,t){var n,i=t.data,a=i.videoVersionInfos,c=i.videoId,o=i.posterUrl,r=i.status,l=null===(n=a[a.length-1])||void 0===n?void 0:n.MainUrl;return e[c]={url:l,poster:o,status:r},e}),{}),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r["useEffect"])((function(){var e=c.body.uhtml;if(e)if(h({uhtml:e,darkUhtml:O(e)}),i.length){var t=ut.replaceHtmlWithSeat(e,i);h({uhtml:t,darkUhtml:O(t)});var n=Date.now();A().then((function(e){var i=ut.replaceSeatWithVideo(t,e);Object(qe["Q"])(qe["k"],{cost:Date.now()-n,articleType:V["d"].RichText}),h({uhtml:i,darkUhtml:O(i),inited:!0})}))}else h({inited:!0})}),[i,c]),Object(r["useEffect"])((function(){if(x.inited&&y){var e=""===x.darkUhtml;e&&h({darkUhtml:O(x.uhtml)})}}),[y,x.darkUhtml,x.inited]),{articleId:a,renderType:x.renderType,body:c.body,uhtml:g&&y?x.darkUhtml:x.uhtml,articleReady:s,enableDarkmodeV2:g,onArticleReady:u,clickReport:{aClick:function(){Object(lt["e"])("click_hyperlink",{article_id:"".concat(a),subscription_account_id:"".concat(o),click_account_id:"",click_aticle_id:"",target:"none",main_account_type:Object(rt["b"])(d)})},cardClick:function(e,t){Object(lt["e"])("article"===e?"click_article_card":"click_account_card",{article_id:"".concat(a),subscription_account_id:"".concat(o),click_aticle_id:"article"===e?t:"",click_account_id:"account"===e?t:"",target:"article"===e?"subscription_mp_article_detail_view":"subscription_mp_account_mainpage_view",main_account_type:Object(rt["b"])(d)})}}}},pt=(n(627),{"./index.less":{"rich-text":"index__rich-text___3gYyH",darkmodeV1:"index__darkmodeV1___BTcW4"}});var bt=function(){var e=mt(),t=e.renderType,n=e.body,i=e.uhtml,a=e.onArticleReady,c=e.clickReport,l=e.enableDarkmodeV2,_=e.articleId;return Object(g["jsx"])(r["Fragment"],{children:"rich-text"===t?Object(g["jsx"])(Ge["a"],{articleId:_,nodes:i,needProcessTag:!0,clickReport:c,className:o()(m()({darkmodeV1:!l}),pt)}):Object(g["jsx"])(ct,{readOnly:!0,contents:n,plugins:[],autoHeight:!0,onReady:a})})},xt=(n(628),{"./index.less":{"ellipsis-text-wraper":"index__ellipsis-text-wraper___33UcP","ellipsis-text":"index__ellipsis-text___2TZ_m",fold:"index__fold___28j6n",hide:"index__hide___1bIDn","more-text":"index__more-text___1CbqV"}});var ht,jt=function(e){var t=e.text,n=Object(F["d"])({open:!1,showBtn:!1,inited:!1}),i=Object(f["a"])(n,2),a=i[0],c=a.open,l=a.showBtn,_=a.inited,u=i[1];return Object(r["useEffect"])((function(){setTimeout((function(){Object(Ce["g"])("#ellipsis-text").then((function(e){e&&(e.height>70?u({showBtn:!0,inited:!0}):u({inited:!0}))}))}),100)}),[]),Object(g["jsxs"])(s["n"],{className:o()(m()("ellipsis-text-wraper"),xt),children:[_&&Object(g["jsx"])(s["k"],{selectable:!0,className:o()(m()("ellipsis-text",{fold:!c}),xt),children:t}),!c&&Object(g["jsxs"])(g["Fragment"],{children:[Object(g["jsx"])(s["k"],{id:"ellipsis-text",className:"index__ellipsis-text___2TZ_m index__hide___1bIDn",children:t}),_&&l&&Object(g["jsxs"])(s["k"],{className:"index__more-text___1CbqV",onClick:function(){u({open:!0,showBtn:!1})},children:["...",Object(d["e"])("Common_Unfold")]})]})]})},ft=n(39),Ot=(ht={},Object(a["a"])(ht,V["w"].Transcoding,{hint:Object(d["e"])("ArticleDetail_VideoTranscoding")}),Object(a["a"])(ht,V["w"].Auditing,{hint:Object(d["e"])("ArticleDetail_VideoAuditing")}),Object(a["a"])(ht,V["w"].TranscodingFailed,{hint:Object(d["e"])("ArticleDetail_VideoTranscodingFailed")}),Object(a["a"])(ht,V["w"].AuditingFailed,{hint:Object(d["e"])("ArticleDetail_VideoAuditingFailed")}),Object(a["a"])(ht,V["w"].Passed,{hint:""}),ht),vt=function(){var e,t=Object(r["useContext"])(ye),n=t.article,i=t.articleContent,a=t.accountId,c=t.onArticleReady,o=t.isPreview,l=Object(F["d"])({posterUrl:"",loading:!0,videoList:[],status:V["w"].Passed}),_=Object(f["a"])(l,2),s=_[0],d=s.loading,u=s.videoList,m=s.posterUrl,p=s.status,b=_[1],x=Object(r["useMemo"])((function(){return{hasReport:!1}}),[]),h=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,i,a,c,o,r,l;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Date.now(),b({loading:!0}),i=(n.relatedResource||[])[0],!i){e.next=13;break}return e.next=6,Ye["a"].getPlayInfo({videoId:i});case 6:a=e.sent,c=a.data,o=c.videoVersionInfos,r=c.posterUrl,l=c.status,Object(qe["Q"])(qe["k"],{cost:Date.now()-t,articleType:V["d"].Video}),b({posterUrl:r,videoList:o,loading:!1,status:l});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){var t=e.detail,i=t.currentTime,c=t.duration;c-i<250&&!x.hasReport&&(Object(qe["Q"])(qe["g"]),!o&&Object(ft["b"])({article:n.id,account:a}))};return Object(r["useEffect"])((function(){0===u.length&&(c(),h())}),[n]),{loading:d,videoList:u,videoUrl:(null===(e=u[u.length-1])||void 0===e?void 0:e.MainUrl)||"",posterUrl:m,desc:i.body.text,isPassed:p===V["w"].Passed,videoStatusText:Ot[p].hint,onTimeUpdate:j}};n(629);var gt=function(){var e=vt(),t=e.loading,n=e.posterUrl,i=e.desc,a=e.isPassed,c=e.videoUrl,o=e.videoStatusText,r=e.onTimeUpdate;return Object(g["jsxs"])(s["n"],{className:"index__article-video___4ycPL",children:[Object(g["jsx"])(s["n"],{className:"index__video-container___1ZA8U",children:t?Object(g["jsx"])(s["n"],{className:"index__seat___xvLFZ"}):a?Object(g["jsx"])(s["m"],{className:"index__video___1Ob6p",src:c,poster:n,controls:!0,autoplay:!0,muted:!0,onTimeUpdate:r}):Object(g["jsx"])(s["n"],{className:"index__seat___xvLFZ",children:Object(g["jsxs"])(s["n"],{className:"index__uploading___2L8Q4",children:[Object(g["jsx"])(s["n"],{className:"iconfont icon-info index__icon___3mnpI"}),Object(g["jsx"])(s["n"],{className:"index__text___3Late",children:o})]})})}),!!i&&Object(g["jsx"])(s["n"],{className:"index__desc-container___3LvVI",children:Object(g["jsx"])(jt,{text:i})})]})},wt=n(134),Ct=function(){var e=Object(r["useContext"])(ye),t=e.articleContent,n=e.article,i=e.accountId,a=e.onArticleReady,c=Object(b["f"])(),o=c.data.appEnv;Object(r["useEffect"])((function(){a()}),[]);var l=Object(wt["a"])(t.body.uhtml);return{articleId:n.id,body:t.body,uhtml:l,images:n.images||[],onImageClick:function(e){var t=n.images||[];p["a"].previewImage({urls:t.map((function(e){return e.orginalUrl})),current:e.orginalUrl})},clickReport:{aClick:function(){Object(lt["e"])("click_hyperlink",{article_id:"".concat(n.id),subscription_account_id:"".concat(i),click_account_id:"",click_aticle_id:"",target:"none",main_account_type:o})}}}},kt=(n(630),{"./index.less":{articleText:"index__articleText___2aBL2",img:"index__img___lyAV6",vertical:"index__vertical___3HqSI"}});function yt(){var e=Ct(),t=e.uhtml,n=e.images,i=e.onImageClick,a=e.clickReport,c=e.articleId;return Object(g["jsxs"])(s["n"],{className:"index__articleText___2aBL2",children:[Object(g["jsx"])(Ge["a"],{nodes:t,articleId:c,clickReport:a,forShortText:!0,needProcessAtTag:!0}),n.map((function(e,t){return Object(g["jsx"])(s["d"],{style:{width:"".concat(e.width,"px")},src:e.smallImageUrl||e.orginalUrl,mode:"widthFix",onClick:function(){return i(e)},className:o()(m()("img",{vertical:e.width<e.height}),kt)},t)}))]})}var At=function(){var e=Object(r["useContext"])(ye),t=e.setState,n=e.article,i=n.contentType,c=n.externalLink,o=void 0===c?"":c,l=n.id,_=e.articleContent,s=[V["g"].Doc,V["g"].Wiki,V["g"].Docx].includes(i)?Object(lt["d"])({url:o,querySearch:{hideHeader:"1"}}):o;return Object(r["useEffect"])((function(){var e;Object(qe["Q"])("subscription_mp_external_detail_view",(e={},Object(a["a"])(e,"article_id",String(l)),Object(a["a"])(e,"article_title",_.title),Object(a["a"])(e,"externalLink",s),e))}),[s]),{externalLink:s,setState:t}};n(631);var It,Tt=function(){var e=At(),t=e.externalLink,n=e.setState;return Object(g["jsx"])(r["Fragment"],{children:t&&Object(g["jsx"])(s["o"],{supportCustomNavigation:!0,src:t,onLoad:function(e){n({articleReady:!0})}})})},St=n(81),Nt=n(113),Rt=n(29),Lt=n(37);function Et(e){return"".concat(Object(d["e"])("Common_Read")," ").concat(e<1e4?e:(e/1e4).toFixed(1)+Object(d["e"])("Common_UnitTenThous"))}var Mt=function(e){var t=new Date(e);return Object(d["e"])("ArticleDetail_ArticleTime",{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()})},Pt="article-canvas",Dt=(It={},Object(a["a"])(It,S["h"],Object(d["e"])("ArticleDetail_Invalid")),Object(a["a"])(It,S["j"],Object(d["e"])("ArticleDetail_NotFound")),Object(a["a"])(It,S["b"],Object(d["e"])("ArticleDetail_AccountShutdown")),Object(a["a"])(It,S["k"],Object(d["e"])("ArticleDetail_OffShelf")),Object(a["a"])(It,S["g"],Object(d["e"])("ArticleDetail_NoAuth")),Object(a["a"])(It,S["i"],Object(d["e"])("Common_UrlDisabled")),Object(a["a"])(It,S["d"],Object(d["e"])("ArticleDetail_ExternalError")),Object(a["a"])(It,S["c"],Object(d["e"])("ArticleDetail_ExternalError")),Object(a["a"])(It,S["f"],Object(d["e"])("Common_FormatError")),It),Ft=function(){var e,t=Object(b["f"])(),n=t.data,i=n.version,c=n.isPC,o=n.systemInfo,l=n.appEnv,s=n.isIos,u=Object(b["g"])(),m=u.user,x=Object(_["useRouter"])(),h=x.params,j=h.articleId,O=void 0===j?"":j,v=h.token,g=void 0===v?"":v,w=h.lang,C=void 0===w?"":w,k=h.commentId,y=void 0===k?"":k,A=h.from,I=void 0===A?"":A,T=h.tenateShareToken,N=void 0===T?"":T,R=Object(F["b"])("detail-bottom"),L=R.instanceId,E=Object(F["d"])({accountId:"",isLike:!1,article:null,readNum:0,likeMembers:[],loading:!0,releaseTime:0,accountName:{jaJp:"",zhCn:"",enUs:""},errorCode:0,articleReady:!1,publicShareToken:"",tenateShareToken:"",shareConfig:{shareInTenant:!1,copyLink:!1,openInBroswer:!1,copyAppLink:!1,externalOpenInBroswer:!1},account:null,initFollowType:0}),M=Object(f["a"])(E,2),P=M[0],D=M[1],B=Object(Lt["b"])((null===(e=P.article)||void 0===e?void 0:e.articleType)||Lt["a"].RichText,l,s),U=B.canvasConfig,H=B.sendShareCard,z=Object(r["useMemo"])((function(){return{loadLike:!1,autoHeight:!Object(Ce["c"])(i,"3.26.0"),hasReportFinishRead:!1,trace:it["b"].getTrace(it["a"])}}),[]),Q=P.accountId,Y=P.account,q=P.isLike,W=P.article,X=P.likeMembers,J=P.publicShareToken,Z=P.tenateShareToken,K=P.articleReady,G=P.shareConfig,$=P.internetLink,ee=W?(Object.entries(W.articleContent).find((function(e){var t=Object(f["a"])(e,2),n=t[1];return n===de}))||[d["a"].en])[0]:d["a"].en,te=function(){var e=Object(we["a"])(ge.a.mark((function e(t){var n,i,a,c;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.shareType,i=n===V["c"].Tenant,a=n===V["c"].Public,c=i||a,D({shareConfig:{shareInTenant:c,copyAppLink:c,copyLink:a,openInBroswer:a,externalOpenInBroswer:c&&t.articleType===Lt["a"].External}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ye["a"].getPublicArticleTokenCrossTenant({articleId:O});case 2:t=e.sent,n=t.data.token,D({internetLink:Object(lt["a"])(n),showInternetBtnLoading:!1});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n,i,o,r,l,_,s,d,u,p,b,x,h;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(it["c"])("articleGetDetailStart",{},z.trace),t=Date.now(),e.prev=2,e.next=5,Ye["a"].getArticleDetailV2({articleId:O,token:g,shareToken:N});case 5:i=e.sent,o=i.data,r=o.article,l=o.readNum,_=o.likeMembers,s=o.releaseTime,d=o.accountBaseInfo,u=d.name,p=d.id,Object(it["c"])("articleGetDetailSuccess",{cost:Date.now()-t},z.trace),D({article:r,readNum:l,loading:!1,likeMembers:_.sort((function(e,t){return Number(t.opTime)-Number(e.opTime)})),releaseTime:Number(s),accountName:u,errorCode:0,isLike:_.some((function(e){var t=e.member.id;return t===(m?m.id:"")})),accountId:p.toString(),account:d,initFollowType:d.followType}),Object(qe["Q"])(qe["i"],{time:Date.now()-t,device:c?"pc":"mobile"}),b=function(){return"feed"===I?"from_feed":"share"===I?"from_share":"articlecard"===I?"from_article_card":"applink"===I?"from_applink":"docblock"===I?"from_block":I&&"string"===typeof I?I:y?"from_comment":"other"},Object(qe["Q"])("subscription_mp_article_detail_view",(n={from:b()},Object(a["a"])(n,"article_id",O),Object(a["a"])(n,"subscription_account_id","".concat(p)),Object(a["a"])(n,"main_account_type",Object(rt["b"])(d.accountType)),Object(a["a"])(n,"article_type",Object(rt["a"])(r.articleType)),n)),g||Object(ft["a"])({article:O,account:p},"articleDetail",null===W||void 0===W?void 0:W.articleType),e.next=28;break;case 21:e.prev=21,e.t0=e["catch"](2),x=e.t0.code,Object(it["c"])("articleGetDetailError",{err:JSON.stringify(e.t0,Object.getOwnPropertyNames(e.t0),2)},z.trace),h=x===S["d"],D({errorCode:x,loading:!1,showInternetBtn:h}),h&&ne();case 28:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(){return e.apply(this,arguments)}}(),ae=Object(r["useCallback"])((function(e){Y&&D({account:Object(Qe["a"])(Object(Qe["a"])({},Y),{},{followType:e})})}),[Y,D]);Object(r["useEffect"])((function(){W&&te(W)}),[W,g]);var ce=function(){z.loadLike||(z.loadLike=!0,q||Object(lt["e"])("thumb_up",{target:"none",article_id:O,subscription_account_id:Q,click_account_id:"",click_aticle_id:"",main_account_type:Object(rt["b"])(null===Y||void 0===Y?void 0:Y.accountType)}),Ye["a"].like({accountId:Q,articleId:O,likeOperate:q?V["n"].Unlike:V["n"].Like}).then((function(){z.loadLike=!1,D({likeMembers:q?X.filter((function(e){var t=e.member.id;return t!==(m?m.id:"")})):[{member:m,opTime:Date.now()}].concat(Object(We["a"])(X)),isLike:!q})})).catch((function(){z.loadLike=!1})))},oe=Object(r["useCallback"])((function(){p["a"].navigateTo({url:"/pages/account-detail/".concat(c?"pc":"mobile","/index?id=").concat(Q)})}),[Q,c]),re=function(){c?p["a"].openSchema({schema:Object(Ce["e"])({path:"pages/complaint/pc/index?id=".concat(O,"&type=").concat(V["f"].ArticleComplaint,"&lang=").concat(ee),mode:"sidebar-semi"})}):p["a"].navigateTo({url:"/pages/complaint/mobile/index?id=".concat(O,"&type=").concat(V["f"].ArticleComplaint,"&lang=").concat(ee)})},le=function(){D({errorCode:0,loading:!0}),ie()};Object(r["useEffect"])((function(){X.length&&m&&D({isLike:X.some((function(e){var t=e.member.id;return t===m.id}))})}),[m,X]),Object(r["useEffect"])((function(){Object(it["c"])("articleStart",{},z.trace),St["a"].enterFromArticle(),ie().then((function(){Object(it["c"])("articleSuccess",{},z.trace),it["b"].reportTTI()}))}),[]);var _e=Object(Nt["a"])((function(e){g||(null===W||void 0===W?void 0:W.articleType)===Lt["a"].Video||Object(Ce["g"])("#".concat(L)).then((function(t){t&&t.top<e&&(z.hasReportFinishRead=!0,Object(ft["b"])({article:O,account:Q}))}))}),100);Object(r["useEffect"])((function(){K&&o&&setTimeout((function(){_e(o.windowHeight)}),500)}),[K,y,o]);var se=function(){!K||!o||z&&z.hasReportFinishRead||_e(o.windowHeight)},de=Object(r["useMemo"])((function(){return W?W.articleContent[C]||Object(d["b"])(W.articleContent):{}}),[W,C]),ue=Object(r["useMemo"])((function(){var e={title:"",author:"",digest:"",body:{}};return W?W.articleContent:{zhCn:e,enUs:e,jaJp:e}}),[W,C]),me=Object(r["useMemo"])((function(){return!!m&&!g&&!!W&&W.allowComment}),[m,g,W]),pe=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n,i;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Z){e.next=16;break}return e.prev=1,e.next=4,Ye["a"].getPublicArticleToken({articleId:O,shareType:V["c"].Tenant});case 4:return t=e.sent,n=t.data.token,D({tenateShareToken:n}),e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e["catch"](1),i=Object(d["e"])("Common_RequestFailed"),e.t0.code===S["e"]&&(i=Object(d["e"])("Common_RequestFailed")),Object(Ce["l"])({icon:"error",title:i}),e.t0;case 16:return e.abrupt("return",Z);case 17:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n,i;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(J){e.next=16;break}return e.prev=1,e.next=4,Ye["a"].getPublicArticleToken({articleId:O,shareType:V["c"].Public});case 4:return t=e.sent,n=t.data.token,D({publicShareToken:n}),e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e["catch"](1),i=Object(d["e"])("Common_RequestFailed"),e.t0.code===S["e"]&&(i=Object(d["e"])("Common_RequestFailed")),Object(Ce["l"])({icon:"error",title:i}),e.t0;case 16:return e.abrupt("return",Z);case 17:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=it["b"].getTrace(z.trace),Object(it["c"])("articleOpenInBroswerStart",{},t),(null===W||void 0===W?void 0:W.articleType)!==Lt["a"].External){e.next=7;break}return e.next=5,p["a"].openSchema({schema:W.externalLink,external:!0});case 5:e.next=12;break;case 7:return e.next=9,be();case 9:return n=e.sent,e.next=12,p["a"].openSchema({schema:Object(lt["a"])(n),external:!0});case 12:Object(it["c"])("articleOpenInBroswerSuccess",{},t),Object(qe["Q"])(qe["h"],{articleId:O});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n,i;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=it["b"].getTrace(z.trace),Object(it["c"])("articleCopyLinkStart",{},n),e.next=4,be();case 4:return i=e.sent,e.next=7,p["a"].setClipboardData({data:Object(lt["a"])(i)});case 7:Object(it["c"])("articleCopyLinkSucccess",{},n),Object(qe["Q"])(qe["f"],{articleId:O}),Object(qe["Q"])("subscription_article_share_click",(t={click:"copy_article_link"},Object(a["a"])(t,"artIcle_id",O),Object(a["a"])(t,"article_type",Object(rt["a"])(null===W||void 0===W?void 0:W.articleType)),Object(a["a"])(t,"account_type",l===Rt["a"].official?"broadcast_account":"subscription_account"),t)),p["a"].showToast({title:Object(d["e"])("ArticleDetail_CopySuccess")});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n,i;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ye["a"].getArticleShortLink({articleId:O});case 2:return n=e.sent,i=n.data.link,e.next=6,p["a"].setClipboardData({data:i});case 6:p["a"].showToast({title:Object(d["e"])("ArticleDetail_CopySuccess")}),Object(qe["Q"])("subscription_article_share_click",(t={click:"copy_article_link"},Object(a["a"])(t,"artIcle_id",O),Object(a["a"])(t,"article_type",Object(rt["a"])(null===W||void 0===W?void 0:W.articleType)),Object(a["a"])(t,"account_type",l===Rt["a"].official?"broadcast_account":"subscription_account"),t)),Object(qe["Q"])("articleDetail_copyAppLink",{articleId:O});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(we["a"])(ge.a.mark((function e(){var t,n,i,c;return ge.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=it["b"].getTrace(z.trace),Object(it["c"])("articleShareInsideStart",{},i),c="",g){e.next=7;break}return e.next=6,pe();case 6:c=e.sent;case 7:Object(qe["Q"])("subscription_article_share_click",(t={click:"share_article"},Object(a["a"])(t,"artIcle_id",O),Object(a["a"])(t,"article_type",Object(rt["a"])(null===W||void 0===W?void 0:W.articleType)),Object(a["a"])(t,"account_type",l===Rt["a"].official?"broadcast_account":"subscription_account"),t)),H({articleId:O,accountId:Q,shareArticleContent:ue,coverUrl:W?W.cover.folderCover:"",shareToken:c,previewToken:g,canvasId:Pt,duration:W&&W.videoDuration||0,image:W&&W.images&&W.images.length?W.images[0]:void 0,accountAvatar:P.account?null===(n=P.account)||void 0===n?void 0:n.avatar:"",accountName:P.accountName,externalLink:null===W||void 0===W?void 0:W.externalLink}).then((function(){Object(it["c"])("articleShareInsideSuccess",{},i),Object(qe["Q"])(qe["j"],{articleId:O})}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){$?p["a"].openSchema({schema:$,external:!1}):D({showInternetBtnLoading:!0})};return Object(Qe["a"])(Object(Qe["a"])({},P),{},{accountName:Object(d["b"])(P.accountName),accountId:Q,autoHeight:z.autoHeight,readStr:Et(P.readNum),timeStr:Mt(P.releaseTime),token:g,lang:C,articleContent:de,articleId:O,accountType:(null===Y||void 0===Y?void 0:Y.accountType)||V["b"].Subscriptions,user:m,showComments:me,shareConfig:G,bottomInstanceId:L,canvasConfig:U,trace:z.trace,commentId:y,request:ie,retry:le,onArticleReady:function(){D({articleReady:!0})},clickThumb:ce,onClickAccount:oe,onContainerScroll:se,openArticleInBroswer:xe,shareInside:fe,copyLink:he,copyAppLink:je,onClickInternetBtn:Oe,onReportClick:re,changeFollowType:ae,setState:D})};n(632);var Bt,Ut,Ht=function(e){var t=e.articleId,n=e.shareConfig,i=e.shareInside,a=e.copyLink,c=e.openArticleInBroswer,o=e.copyAppLink,l=e.token,_=e.articleType,u=Object(r["useMemo"])((function(){var e=[];return n.shareInTenant&&e.push({udIcon:"forward_outlined",hoverText:_&&_!==V["d"].External?Object(d["e"])("ArticleDetail_SendToChat"):"",position:"right",onClick:i,disabled:!t}),n.copyAppLink&&!l.length&&_!==V["d"].External&&(n.copyLink?e.push({udIcon:"link-copy_outlined",position:"right",onClick:function(){},disabled:!t,popoverConfig:{trigger:"hover",needArrow:!1,placement:"bottomRight",overlay:!1,content:Object(g["jsxs"])(s["n"],{className:"icons__popover___3As8s",children:[Object(g["jsx"])(s["n"],{className:"icons__item___2JeZ-",onClick:o,children:Object(d["e"])("ArticleDetail_CopyLinkTenate")}),Object(g["jsx"])(s["n"],{className:"icons__item___2JeZ-",onClick:a,children:Object(d["e"])("ArticleDetail_CopyLinkInternet")})]})}}):e.push({udIcon:"link-copy_outlined",hoverText:Object(d["e"])("ArticleDetail_CopyLinkTenate"),position:"right",onClick:o,disabled:!t})),n.externalOpenInBroswer&&e.push({udIcon:"browser-mac_outlined",hoverText:"",position:"right",onClick:c,disabled:!t}),e}),[t,n]);return{icons:u}};n(633);var zt={"./index.less":{"page-detail":"index__page-detail___Idy_y","canvas-wrapper":"index__canvas-wrapper___3yNKQ",header:"index__header___30Hd-",title:"index__title___3yBXV","sub-header":"index__sub-header___pRGnh","sub-message":"index__sub-message___2C1S_","account-name":"index__account-name___T731-","author-message":"index__author-message___1bwVZ",author:"index__author___1_F0p",time:"index__time___3vVBk","follow-btn":"index__follow-btn___RdZO2","content-wraper":"index__content-wraper___l9xe_",bottom:"index__bottom___2Y5t-","read-count":"index__read-count___2Rpi3",link:"index__link___1Ufse","rc-l":"index__rc-l___3DhWR","rc-r":"index__rc-r___2Ym3z",icon:"index__icon___1bLif","detail-comments":"index__detail-comments___2x5HH","invalid-error":"index__invalid-error___3VY2u",image:"index__image___xRqZo",externalError:"index__externalError___eSKTi",text:"index__text___k63yb","btn-wraper":"index__btn-wraper___y1vE5"}};var Vt=(Bt={},Object(a["a"])(Bt,V["j"].Forced,Object(d["e"])("AccountDetail_FollowForce")),Object(a["a"])(Bt,V["j"].Normal,Object(d["e"])("AccountList_Followed")),Object(a["a"])(Bt,V["j"].Recommend,Object(d["e"])("AccountList_Followed")),Object(a["a"])(Bt,V["j"].None,Object(d["e"])("AccountDetail_Follow")),Bt),Qt=(Ut={},Object(a["a"])(Ut,V["j"].Forced,Object(d["e"])("Account_ForcefollowTooltip")),Object(a["a"])(Ut,V["j"].Recommend,Object(d["e"])("Account_RecommandedfollowTooltip")),Ut),Yt=function(){var e=Ft(),t=e.isLike,n=e.accountName,i=e.likeMembers,a=e.loading,c=e.readStr,l=e.timeStr,u=e.token,j=e.errorCode,f=e.articleContent,O=e.articleId,v=e.user,w=e.article,C=e.showComments,R=e.articleReady,L=e.shareConfig,M=e.bottomInstanceId,P=e.canvasConfig,D=e.trace,F=e.accountId,B=e.commentId,U=e.account,H=e.showInternetBtn,z=e.showInternetBtnLoading,Q=e.accountType,Y=e.initFollowType,q=e.retry,W=e.clickThumb,X=e.onClickAccount,J=e.onClickInternetBtn,Z=e.onReportClick,K=e.onArticleReady,G=e.onContainerScroll,$=e.shareInside,ee=e.copyLink,te=e.copyAppLink,ne=e.openArticleInBroswer,ie=e.changeFollowType,ae=e.setState,ce=Object(A["a"])(U,ie,void 0,A["b"],"article_detail"),oe=ce.followType,re=ce.following,le=ce.toggleFollowType,_e=oe?Object(g["jsx"])(I["a"],{type:oe===V["j"].None?"primary":"secondary",size:"small",style:{verticalAlign:"middle"},disabled:oe===V["j"].Forced,icon:oe===V["j"].None?"add_outlined":void 0,onClick:le,loading:re,children:Vt[oe]}):null,se=oe?Qt[oe]:"",de=Object(lt["c"])(),ue=Object(r["useRef"])("articleDetail-".concat(Date.now())),me=Object(_["useRouter"])(),pe=me.params.folderApproval,be=Object(b["f"])(),xe=be.data.isFeedMode,he=f.title,je=void 0===he?"":he,fe=f.author,Oe=void 0===fe?"":fe,ve=Dt[j],ge=de[j],we=Ht({articleId:O,shareConfig:L,shareInside:$,copyLink:ee,openArticleInBroswer:ne,copyAppLink:te,token:u,articleType:null===w||void 0===w?void 0:w.articleType}),Ce=we.icons,ke=function(){switch(null===w||void 0===w?void 0:w.articleType){case Lt["a"].RichText:return Object(g["jsx"])(bt,{});case Lt["a"].Video:return Object(g["jsx"])(gt,{});case Lt["a"].Text:return Object(g["jsx"])(yt,{});case Lt["a"].External:return Object(g["jsx"])(Tt,{});default:return Object(g["jsx"])(r["Fragment"],{})}};return Object(g["jsx"])(h["b"],{title:"",showError:!!j&&!ve,showLoading:a,retry:q,limitWidth:!xe,onScrollToLower:function(){E({event:k.OnReachBootom})},forceShowBottomBorder:!0,onScroll:function(){G()},customIcons:pe?[]:Ce,showAdminEntry:!pe,scrollWithAnimation:!0,subscribeEventId:B?ue.current:"",showScrollbar:!0,showOpenInWindowIconTip:(null===w||void 0===w?void 0:w.articleType)!==Lt["a"].External,children:Object(g["jsx"])(ye.Provider,{value:{isPreview:!!u,loading:a,trace:D,article:w,articleContent:f,articleReady:R,accountId:F,onArticleReady:K,subscribeEventUniqueId:ue.current,accountType:Q,setState:ae},children:ve?Object(g["jsxs"])(s["n"],{className:"index__invalid-error___3VY2u",children:[Object(g["jsx"])(s["d"],{src:ge,className:o()(m()("image",{externalError:j==S["c"]||j===S["d"]}),zt)}),Object(g["jsx"])(s["n"],{className:"index__text___k63yb",children:ve}),H?Object(g["jsx"])(s["n"],{className:"index__btn-wraper___y1vE5",children:Object(g["jsx"])(I["a"],{type:"primary",style:{minWidth:"144px"},loading:z,onClick:J,children:Object(d["e"])("ArticleDetail_InternetLink")})}):void 0]}):Object(g["jsxs"])(s["n"],{children:[u&&R&&Object(g["jsx"])(N["a"],{closable:!1,children:Object(d["e"])("ArticleDetail_PreviewTitle")}),Object(g["jsxs"])(s["n"],{className:"index__page-detail___Idy_y",children:[Object(g["jsxs"])(s["n"],{children:[R&&(null===w||void 0===w?void 0:w.articleType)!==Lt["a"].External&&Object(g["jsxs"])(s["n"],{className:"index__header___30Hd-",children:[Object(g["jsx"])(s["k"],{selectable:!0,className:"index__title___3yBXV",children:je}),Object(g["jsxs"])(s["n"],{className:"index__sub-header___pRGnh",children:[Object(g["jsxs"])(s["n"],{className:"index__sub-message___2C1S_",children:[Object(g["jsx"])(s["n"],{className:"index__account-name___T731-",onClick:X,children:n}),Object(g["jsxs"])(s["n"],{className:"index__author-message___1bwVZ",children:[!!Oe&&Object(g["jsx"])(s["n"],{className:"index__author___1_F0p",children:Oe}),Object(g["jsx"])(s["n"],{className:"index__time___3vVBk",children:l})]})]}),oe&&Y===V["j"].None?Object(g["jsx"])(s["n"],{className:"index__follow-btn___RdZO2",children:se?Object(g["jsx"])(T["a"],{text:se,placement:"left",children:_e}):_e}):null]})]}),Object(g["jsx"])(s["n"],{className:o()(m()("content-wraper"),zt),children:ke()}),(null===w||void 0===w?void 0:w.articleType)!==Lt["a"].External&&Object(g["jsxs"])(s["n"],{className:"index__bottom___2Y5t-",id:M,children:[Object(g["jsxs"])(s["n"],{className:"index__read-count___2Rpi3",children:[Object(g["jsxs"])(s["n"],{className:"index__rc-l___3DhWR",children:[w&&w.allowOriginalLink&&w.originalLink&&Object(g["jsx"])(s["n"],{className:"index__link___1Ufse",onClick:function(){p["a"].openSchema({schema:w.originalLink,external:!1})},children:Object(d["e"])("ArticleDetail_OriginLink")}),u?"":c]}),!u&&Object(g["jsxs"])(s["n"],{className:"index__rc-r___2Ym3z",onClick:Z,children:[Object(g["jsx"])(s["n"],{className:"iconfont icon-icon_global_addcomment_nor2 index__icon___1bLif"}),Object(g["jsx"])(s["n"],{children:Object(d["e"])("AccountDetail_Complaint")})]})]}),!u&&Object(g["jsx"])(y,{onChange:W,isLike:t,likeList:i,onDetailClick:function(){Object(x["b"])({list:i})}})]})]}),(null===w||void 0===w?void 0:w.articleType)!==Lt["a"].External&&C&&R&&Object(g["jsx"])(s["n"],{className:"index__detail-comments___2x5HH",children:Object(g["jsx"])(Ke,{article:w,user:v,account:U,activeCommentId:B})})]}),Object(g["jsx"])(s["n"],{className:"index__canvas-wrapper___3yNKQ",children:Object(g["jsx"])(s["b"],{canvasId:Pt,className:"canvas",style:{width:"".concat(P.width,"px"),height:"".concat(P.height,"px")}})})]})})})},qt=Yt,Wt={usingComponents:{"native-button":"../../../@native-mobile-components/button/index","native-dialog":"../../../@native-pc-components/dialog/index","native-editor":"../../../@native-pc-components/editor/index","native-fab":"../../../@native-mobile-components/fab/index","native-icon":"../../../@native-pc-components/icon/index","native-modal":"../../../@native-pc-components/modal/index","native-tag":"../../../@native-pc-components/tag/index","native-view":"../../../@native-pc-components/view/index"}};Page(Object(i["createPageConfig"])(qt,"pages/article-detail/pc/index",{root:{cn:[]}},Wt||{}))}},[[664,0,1,2,3]]]);
});