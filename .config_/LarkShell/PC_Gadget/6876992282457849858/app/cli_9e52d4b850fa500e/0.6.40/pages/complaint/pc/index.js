define("pages/complaint/pc/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,fetch,XMLHttpRequest,WebSocket,webkit,ttJSCore,Reporter,print,indexedDB){
 (tt["webpackJsonp"]=tt["webpackJsonp"]||[]).push([[16],{347:function(e,n){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iNy45OTk1NyIgY3k9IjcuOTk5NTciIHI9IjYuMjIyMjIiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik03Ljk5OTM1IDE1LjMzMzdDMy45NDkzNSAxNS4zMzM3IDAuNjY2MDE2IDEyLjA1MDMgMC42NjYwMTYgOC4wMDAzM0MwLjY2NjAxNiAzLjk1MDMzIDMuOTQ5MzUgMC42NjY5OTIgNy45OTkzNSAwLjY2Njk5MkMxMi4wNDk0IDAuNjY2OTkyIDE1LjMzMjcgMy45NTAzMyAxNS4zMzI3IDguMDAwMzNDMTUuMzMyNyAxMi4wNTAzIDEyLjA0OTQgMTUuMzMzNyA3Ljk5OTM1IDE1LjMzMzdaTTcuOTk5MzUgNy4wNTc2Nkw2LjAxNjAyIDUuMDc0MzNDNS45NTM1MSA1LjAxMTg0IDUuODY4NzQgNC45NzY3MyA1Ljc4MDM1IDQuOTc2NzNDNS42OTE5NiA0Ljk3NjczIDUuNjA3MTkgNS4wMTE4NCA1LjU0NDY4IDUuMDc0MzNMNS4wNzMzNSA1LjU0NTY2QzUuMDEwODYgNS42MDgxNyA0Ljk3NTc1IDUuNjkyOTQgNC45NzU3NSA1Ljc4MTMzQzQuOTc1NzUgNS44Njk3MSA1LjAxMDg2IDUuOTU0NDggNS4wNzMzNSA2LjAxNjk5TDcuMDU2NjggOC4wMDAzM0w1LjA3MzM1IDkuOTgzNjZDNS4wMTA4NiAxMC4wNDYyIDQuOTc1NzUgMTAuMTMwOSA0Ljk3NTc1IDEwLjIxOTNDNC45NzU3NSAxMC4zMDc3IDUuMDEwODYgMTAuMzkyNSA1LjA3MzM1IDEwLjQ1NUw1LjU0NDY4IDEwLjkyNjNDNS42MDcxOSAxMC45ODg4IDUuNjkxOTYgMTEuMDIzOSA1Ljc4MDM1IDExLjAyMzlDNS44Njg3NCAxMS4wMjM5IDUuOTUzNTEgMTAuOTg4OCA2LjAxNjAyIDEwLjkyNjNMNy45OTkzNSA4Ljk0Mjk5TDkuOTgyNjggMTAuOTI2M0MxMC4wNDUyIDEwLjk4ODggMTAuMTMgMTEuMDIzOSAxMC4yMTg0IDExLjAyMzlDMTAuMzA2NyAxMS4wMjM5IDEwLjM5MTUgMTAuOTg4OCAxMC40NTQgMTAuOTI2M0wxMC45MjU0IDEwLjQ1NUMxMC45ODc4IDEwLjM5MjUgMTEuMDIyOSAxMC4zMDc3IDExLjAyMjkgMTAuMjE5M0MxMS4wMjI5IDEwLjEzMDkgMTAuOTg3OCAxMC4wNDYyIDEwLjkyNTQgOS45ODM2Nkw4Ljk0MjAyIDguMDAwMzNMMTAuOTI1NCA2LjAxNjk5QzEwLjk4NzggNS45NTQ0OCAxMS4wMjI5IDUuODY5NzEgMTEuMDIyOSA1Ljc4MTMzQzExLjAyMjkgNS42OTI5NCAxMC45ODc4IDUuNjA4MTcgMTAuOTI1NCA1LjU0NTY2TDEwLjQ1NCA1LjA3NDMzQzEwLjM5MTUgNS4wMTE4NCAxMC4zMDY3IDQuOTc2NzMgMTAuMjE4NCA0Ljk3NjczQzEwLjEzIDQuOTc2NzMgMTAuMDQ1MiA1LjAxMTg0IDkuOTgyNjggNS4wNzQzM0w3Ljk5OTM1IDcuMDU3NjZaIiBmaWxsPSIjMUYyMzI5Ii8+Cjwvc3ZnPgo="},637:function(e,n,t){e.exports={complaint:"index__complaint___3ayb_",form:"index__form___2aGTT","c-form-item":"index__c-form-item___3NwWj","title-line":"index__title-line___3E9PW",required:"index__required___3ijEn",limit:"index__limit___WyXBy",content:"index__content___W81dT","account-info":"index__account-info___2t7Sk",avatar:"index__avatar___TZiUi",right:"index__right___3_VaK",name:"index__name___3s1iY",desc:"index__desc___1irue","article-info":"index__article-info___23rcz","reason-wrapper":"index__reason-wrapper___2QCPK",reason:"index__reason___2igKr",decorate:"index__decorate___30rw9",invalid:"index__invalid___22weD",screenshots:"index__screenshots___1Hb57",item:"index__item___5TA0l",img:"index__img___36ruh",close:"index__close___1hws8",add:"index__add___31PR5",icon:"index__icon___3bYIf",footer:"index__footer___JTiXZ"}},671:function(e,n,t){"use strict";t.r(n);var _,i=t(23),c=t(10),a=t(11),s=t.n(a),r=t(2),o=t(1),l=t(214),j=t(3),d=t(13),x=t.n(d),u=t(189),M=t(9),N=t(18),m=t(72),O=t(17),b=t(7),g=t.n(b),T=t(12),D=t(4),h=t(21),A=t(25),p=t(19),I=t(5),w=t(114),f=t(347),z=t.n(f),k=t(24),C=200,y=(_={},Object(D["a"])(_,j["a"].zh,I["m"].ZhCn),Object(D["a"])(_,j["a"].en,I["m"].EnUs),Object(D["a"])(_,j["a"].jp,I["m"].JaJp),_),v=function(){var e=Object(h["useRouter"])(),n=e.params,t=void 0===n?{id:"",type:I["f"].AccountComplaint,lang:j["a"].en}:n,_=Object(A["d"])({account:void 0,article:void 0,reason:"",screenshots:[],loading:!1,error:!1,submitting:!1,reasonOverLength:!1}),i=Object(c["a"])(_,2),a=i[0],s=i[1],o=t,l=o.id,d=o.type,x=o.lang,u=Number(d),N=function(){var e=Object(T["a"])(g.a.mark((function e(){var n,t;return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s({loading:!0}),e.prev=1,u!==I["f"].AccountComplaint){e.next=9;break}return e.next=5,p["a"].getUserAccountDetail({accountId:l});case 5:n=e.sent,s({account:n.data.accountBaseInfo}),e.next=13;break;case 9:return e.next=11,p["a"].getArticleSummary({articleId:l});case 11:t=e.sent,s({article:t.data.article});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),s({error:!0});case 18:s({loading:!1});case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();Object(r["useEffect"])((function(){N()}),[]);var m=function(e){var n=e.detail.value;s({reason:n,reasonOverLength:n.length>C})},b=Object(r["useCallback"])((function(e){var n=a.screenshots;s({screenshots:[].concat(Object(O["a"])(n),Object(O["a"])(e.filter((function(e){return e.status===w["a"].SUCCEED})).map((function(e){return e.url}))))})}),[s,a]),D=Object(r["useCallback"])((function(e){var n=a.screenshots;s({screenshots:n.filter((function(){return(arguments.length<=1?void 0:arguments[1])!==e}))})}),[s,a]),f=Object(r["useCallback"])((function(e){var n=a.screenshots;M["a"].previewImage({urls:n,current:n[e]})}),[a]),v=Object(r["useCallback"])(Object(T["a"])(g.a.mark((function e(){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var t=a.reason,_=a.screenshots;s({submitting:!0}),p["a"].putComplaint({complaintType:u,id:l,complaintReason:t,complaintPicture:_,language:[y[x]]}).then((function(){M["a"].showToast({title:Object(j["e"])("Complaint_Succeed"),mask:!0}),s({submitting:!1}),Object(k["a"])({click:"click_compliant_account",subscriptionAccountId:l}),setTimeout((function(){M["a"].hideToast(),e()}),1500)})).catch((function(){M["a"].showToast({title:Object(j["e"])("Common_RequestFailed"),icon:"none"}),s({submitting:!1}),n()}))})));case 1:case"end":return e.stop()}}),e)}))),[a,u]),L=Object(A["e"])({limit:4-a.screenshots.length,onComplete:b}),S=L.run;return{state:a,setState:s,onInput:m,onDelete:D,onSubmit:v,previewImage:f,run:S,disabled:a.reasonOverLength||""===a.reason,retry:N,CloseIcon:z.a,lang:x,type:u,contentTitle:u===I["f"].AccountComplaint?Object(j["e"])("Complaint_Account"):Object(j["e"])("Complaint_Article")}},L=(t(637),t(0));var S={"./index.less":{complaint:"index__complaint___3ayb_",form:"index__form___2aGTT","c-form-item":"index__c-form-item___3NwWj","title-line":"index__title-line___3E9PW",title:"index__title___3JShO",required:"index__required___3ijEn",limit:"index__limit___WyXBy",content:"index__content___W81dT","account-info":"index__account-info___2t7Sk",avatar:"index__avatar___TZiUi",right:"index__right___3_VaK",name:"index__name___3s1iY",desc:"index__desc___1irue","article-info":"index__article-info___23rcz","reason-wrapper":"index__reason-wrapper___2QCPK",reason:"index__reason___2igKr",decorate:"index__decorate___30rw9",invalid:"index__invalid___22weD",screenshots:"index__screenshots___1Hb57",item:"index__item___5TA0l",img:"index__img___36ruh",close:"index__close___1hws8",add:"index__add___31PR5",icon:"index__icon___3bYIf",footer:"index__footer___JTiXZ"}};var E=function(){var e=Object(r["useState"])(!1),n=Object(c["a"])(e,2),t=n[0],_=n[1],i=v(),a=i.state,d=a.account,O=a.article,b=a.reason,g=a.screenshots,T=a.loading,D=a.error,h=a.submitting,A=a.reasonOverLength,p=i.contentTitle,I=i.disabled,w=i.onInput,f=i.onDelete,z=i.onSubmit,k=i.previewImage,y=i.retry,E=i.run,U=i.CloseIcon,Y=Object(r["useCallback"])((function(){var e=getCurrentPages().length>1;e?M["a"].navigateBack():M["a"].exitMiniProgram()}),[]),Q=function(){t||(_(!0),z().then((function(){Y(),_(!1)})).catch((function(){_(!1)})))},P=function(){Y()};return Object(L["jsx"])(u["a"],{title:Object(j["e"])("Complaint_Title"),showLoading:T,showError:D,retry:y,children:Object(L["jsxs"])(o["n"],{className:"index__complaint___3ayb_",children:[Object(L["jsxs"])(o["n"],{className:"index__form___2aGTT",children:[Object(L["jsxs"])(o["n"],{className:"index__c-form-item___3NwWj",children:[Object(L["jsx"])(o["n"],{className:"index__title-line___3E9PW",children:Object(L["jsx"])(o["k"],{children:p})}),Object(L["jsxs"])(o["n"],{className:"index__content___W81dT",children:[!!d&&Object(L["jsxs"])(o["n"],{className:"index__account-info___2t7Sk",children:[Object(L["jsx"])(o["d"],{className:"index__avatar___TZiUi",src:d.avatar}),Object(L["jsxs"])(o["n"],{className:"index__right___3_VaK",children:[Object(L["jsx"])(o["n"],{className:"index__name___3s1iY",children:Object(j["b"])(d.name)}),Object(L["jsx"])(o["n"],{className:"index__desc___1irue",children:Object(j["b"])(d.desc)})]})]}),!!O&&Object(L["jsxs"])(o["n"],{className:"index__article-info___23rcz",children:[Object(L["jsx"])(o["n"],{className:"index__avatar___TZiUi",children:Object(L["jsx"])(m["a"],{articleType:O.articleType,src:O.cover.articleCover})}),Object(L["jsx"])(o["n"],{className:"index__right___3_VaK",children:Object(L["jsx"])(o["n"],{className:"index__name___3s1iY",children:Object(j["b"])(O.title)})})]})]})]}),Object(L["jsxs"])(o["n"],{className:"index__c-form-item___3NwWj",children:[Object(L["jsxs"])(o["n"],{className:"index__title-line___3E9PW",children:[Object(L["jsx"])(o["k"],{className:"index__title___3JShO",children:"".concat(Object(j["e"])("Complaint_Reason"))}),Object(L["jsx"])(o["k"],{className:"index__required___3ijEn",children:"*"})]}),Object(L["jsx"])(o["n"],{className:"index__content___W81dT",children:Object(L["jsxs"])(o["n"],{className:"index__reason-wrapper___2QCPK",children:[Object(L["jsx"])(o["l"],{value:b,className:"index__reason___2igKr",style:{color:Object(N["a"])("text-title")},placeholder:Object(j["e"])("Complaint_ReasonPlaceholder"),placeholderStyle:"color:".concat(Object(N["a"])("text-placeholder"),";word-break: break-word"),onInput:w,maxlength:-1}),Object(L["jsxs"])(o["n"],{className:s()(x()("decorate",{invalid:A}),S),children:[b.length,"/",C]})]})})]}),Object(L["jsxs"])(o["n"],{className:"index__c-form-item___3NwWj",children:[Object(L["jsxs"])(o["n"],{className:"index__title-line___3E9PW",children:[Object(L["jsx"])(o["k"],{className:"index__title___3JShO",children:"".concat(Object(j["e"])("Complaint_Screenshot"))}),Object(L["jsxs"])(o["k"],{className:"index__limit___WyXBy",children:["(",g.length,"/4)"]})]}),Object(L["jsx"])(o["n"],{className:"index__content___W81dT",children:Object(L["jsxs"])(o["n"],{className:"index__screenshots___1Hb57",children:[g.map((function(e,n){return Object(L["jsxs"])(o["n"],{className:"index__item___5TA0l",children:[Object(L["jsx"])(o["d"],{src:e,className:"index__img___36ruh",mode:"aspectFill",onClick:function(){return k(n)}}),Object(L["jsx"])(o["d"],{src:U,className:"index__close___1hws8",onClick:function(e){e.stopPropagation(),f(n)}})]})})),g.length<4&&Object(L["jsx"])(o["n"],{className:"index__item___5TA0l index__add___31PR5",onClick:function(){return E()},children:Object(L["jsx"])(o["n"],{className:"iconfont icon-add1 index__icon___3bYIf"})})]})})]})]}),Object(L["jsxs"])(o["n"],{className:"index__footer___JTiXZ",children:[Object(L["jsx"])(l["a"],{style:{width:"100px"},type:"secondary",onClick:function(){return P()},children:Object(j["e"])("Common_Cancel")}),Object(L["jsx"])(l["a"],{type:"primary",style:{marginLeft:"16px",width:"100px"},onClick:function(){return Q()},loading:h,disabled:I,children:Object(j["e"])("Common_Submit")})]})]})})},U=E,Y={usingComponents:{"native-button":"../../../@native-mobile-components/button/index","native-dialog":"../../../@native-mobile-components/dialog/index","native-fab":"../../../@native-mobile-components/fab/index","native-icon":"../../../@native-pc-components/icon/index","native-modal":"../../../@native-mobile-components/modal/index","native-view":"../../../@native-pc-components/view/index"}};Page(Object(i["createPageConfig"])(U,"pages/complaint/pc/index",{root:{cn:[]}},Y||{}))}},[[671,0,1,2,3]]]);
});