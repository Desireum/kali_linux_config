!function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=116)}({116:function(e,t,o){"use strict";o.r(t);var i=o(43);let n=0;const r=document.querySelector(".overlay__popup"),s=Array.from(document.querySelectorAll(".overlay__status-item")),a=document.querySelector(".overlay__status"),c=e=>{r.querySelector(".overlay__status-head").textContent=chrome.i18n.getMessage({success:"pdfFound",fail:"pdfNoFound",resolver:"keepLooking",loggedOut:"clickToLogin"}[e])};function d(e,t){s.forEach(e=>{e.classList.contains("overlay__status-item--searching")&&(e.classList.add("overlay__status-item--fail"),e.classList.remove("overlay__status-item--searching"))});const o=[{id:"locker",methods:["viacanarylocker"],rank:1},{id:"library",methods:["viaezproxy","viadeepjstor","viashibboleth","viadeep"],rank:3},{id:"openAccess",methods:["viaoadoi","gs","viacanarydb"],rank:2}].find(t=>t.methods.includes(e));if(o&&t){const e=document.getElementById(o.id);e&&(e.classList.remove("overlay__status-item--fail"),e.classList.add("overlay__status-item--success"),o.rank>n&&(s.forEach(e=>{e.classList.remove("main-source")}),n=o.rank,e.classList.add("main-source")))}}function l(e){const{found:t,route:o,doi:i,correction:n}=e;chrome.runtime.sendMessage({action:"get-bg-page-profile"},({profile:e})=>{let s;return i&&(s=i.match(/10\.\d{4,9}\/[-._;()/:A-z0-9]+/)||i.toLowerCase().startsWith("pmid:")),!t&&e.openUrlPrefix&&s?n?(c("fail"),void d(o,!1)):(c("resolver"),void function(e){const t=document.querySelector(".institution__text"),o=document.querySelector(".institution");((e,t="is-visible")=>{e.classList.remove(t)})(a),((e,t="is-visible")=>{e.classList.add(t)})(o);let i=chrome.i18n.getMessage("accessOptions",e.institutionName);if(e.hasNILDEOpenUrl){i="Clicca qui per richiedere questo articolo tramite NILDE";r.querySelector(".overlay__status-head").textContent="Usa NILDE per chiedere questo articolo alla tua biblioteca"}t.textContent=i}(e)):t?(c("success"),void d(o,!0)):(c("fail"),void d(o,!1))})}window.onload=function(){const e={doi:void 0,providerId:void 0,contentId:void 0,contextId:void 0,active:void 0,signIn:void 0,shareRequest:void 0,getStarted:void 0,correction:void 0},t=window.location.href.split("?")[1];let o;t&&(o=new URLSearchParams(t),e.contextId=o.get("context_id"),e.contentId=o.get("content_id"),e.doi=o.get("doi"),e.providerId=o.get("provider_id"),e.host=o.get("host"),e.active=Boolean(o.get("active")),e.getStarted=Boolean(o.get("get_started")),e.signIn=Boolean(o.get("sign_in"))),chrome.runtime.onMessage.addListener(t=>{const{action:o}=t;if(t.contentId===e.contentId)if("kopernio-logged-out"===o)c("loggedOut"),a.classList.add("non-logged-in");else if("show-kopernio-button"===o){const{doi:o,providerId:i,route:n,found:r,correction:s}=t;l(Object.assign(e,{doi:o,providerId:i,route:n,found:r,correction:s}))}}),Object(i.a)()}},43:function(e,t,o){"use strict";function i(){document.querySelectorAll("[data-i18n]").forEach(e=>{const t=e.dataset.i18n.split("|"),o=t[0],i=t.length>1&&"tooltip"===t[1],n=chrome.i18n.getMessage(o);n&&(e.childNodes.forEach(e=>{"#text"===e.nodeName&&(e.textContent=n)}),i&&e.setAttribute("data-tooltip",n))})}o.d(t,"a",(function(){return i}))}});