!function(){"use strict";function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r,o,i={dispatchEvent:EventTarget.prototype.dispatchEvent,stopImmediatePropagation:Event.prototype.stopImmediatePropagation,appendChild:Node.prototype.appendChild,map:{clear:Map.prototype.clear,set:Map.prototype.set,has:Map.prototype.has,get:Map.prototype.get},array:{push:Array.prototype.push,includes:Array.prototype.includes},Map:Map,ShadowRoot:ShadowRoot,HTMLMediaElement:HTMLMediaElement,CustomEvent:CustomEvent,JSON:{parse:JSON.parse,stringify:JSON.stringify}};function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}null===(o=document.currentScript)||void 0===o||o.remove();var u,s,d,y,f,h=[],v=[];function m(t,e,a){var n=null==t?void 0:t.prototype[e];if(n){t.prototype[e]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=n.apply(this,e);return a(e,this,o),o};try{d.set(t.prototype[e],n)}catch(t){}}}function g(t,e,a){e instanceof i.HTMLMediaElement&&(i.array.includes.call(h,e)||(i.array.push.call(h,e),u.wiggleOn(e)))}function b(t,e,a){a instanceof i.ShadowRoot&&(i.array.includes.call(v,a)||(i.array.push.call(v,a),u.wiggleOn(a)))}var w=e((function t(){var e=this;a(this,t),n(this,"originalFn",Function.prototype.toString),n(this,"outputMap",new Map),n(this,"set",(function(t,a){try{var n=e.originalFn.call(a);n&&i.map.set.call(e.outputMap,t,n)}catch(t){}}));var r=this;Function.prototype.toString=function(){try{var t=i.map.get.call(r.outputMap,this);if(t)return t}catch(t){}for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return r.originalFn.apply(this,a)},this.set(Function.prototype.toString,this.originalFn)})),E=e((function t(){var e=this;a(this,t),n(this,"active",!1),n(this,"tempTimeout",void 0),n(this,"dummyAudio",new Audio),n(this,"ogDesc",{playbackRate:Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"playbackRate"),defaultPlaybackRate:Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"defaultPlaybackRate")}),n(this,"coherence",{playbackRate:new Map,defaultPlaybackRate:new Map}),n(this,"activate",(function(){e.tempTimeout&&(clearTimeout(e.tempTimeout),delete e.tempTimeout),e.active||(e.active=!0,i.map.clear.call(e.coherence.playbackRate),i.map.clear.call(e.coherence.defaultPlaybackRate),h.forEach((function(t){i.map.set.call(e.coherence.playbackRate,t,e.ogDesc.playbackRate.get.call(t)),i.map.set.call(e.coherence.defaultPlaybackRate,t,e.ogDesc.defaultPlaybackRate.get.call(t))})))})),n(this,"deactivate",(function(){e.tempTimeout&&(clearTimeout(e.tempTimeout),delete e.tempTimeout),e.active&&(e.active=!1)})),n(this,"activateFor",(function(t){e.active||(e.activate(),e.tempTimeout=setTimeout(e.deactivate,t))}));var r,o=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(t){if("string"==typeof t)return c(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){l=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(l)throw o}}}}(["playbackRate","defaultPlaybackRate"]);try{var l=function(){var t=r.value,a=e.ogDesc[t],n=e.coherence[t],o=e;try{Object.defineProperty(HTMLMediaElement.prototype,t,{configurable:!0,enumerable:!0,get:function(){return o.ogDesc[t].get.call(this),o.active?i.map.has.call(n,this)?i.map.get.call(n,this):1:a.get.call(this)},set:function(e){!o.active||this instanceof i.HTMLMediaElement||o.ogDesc[t].set.call(this,e);try{var r=a.set.call(o.active?o.dummyAudio:this,e),c=a.get.call(o.active?o.dummyAudio:this);return i.map.set.call(n,this,c),r}catch(t){throw t}}});var c=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,t);d.set(c.get,a.get),d.set(c.set,a.set)}catch(t){}};for(o.s();!(r=o.n()).done;)l()}catch(t){o.e(t)}finally{o.f()}})),S=e((function t(){var e=this;a(this,t),n(this,"parasite",document.createElement("div")),n(this,"parasiteRoot",this.parasite.attachShadow({mode:"open"})),n(this,"handle",(function(t){var e;i.stopImmediatePropagation.call(t);try{t.detail&&(e=i.JSON.parse(t.detail))}catch(t){}if(e)if("SEEK_NETFLIX"===e.type)!function(t){try{(e=window.netflix.appContext.state.playerApp.getAPI().videoPlayer,e.getAllPlayerSessionIds().map((function(t){return e.getVideoPlayerBySessionId(t)}))).forEach((function(e){return e.seek(1e3*t)}))}catch(t){}var e}(e.value);else if("GHOST"===e.type)e.off?s.deactivate():s.activate();else if("YT_RATE_CHANGE"===e.type){var a;e.value&&(null===(a=f)||void 0===a||a(e.value))}})),n(this,"send",(function(t){i.dispatchEvent.call(e.parasiteRoot,new i.CustomEvent("GS_SERVER",{detail:i.JSON.stringify({type:"MSG",data:t})}))})),n(this,"wiggleOn",(function(t){i.appendChild.call(t,e.parasite),i.dispatchEvent.call(e.parasiteRoot,new i.CustomEvent("GS_SERVER",{detail:i.JSON.stringify({type:"WIGGLE"})}))})),this.parasite.id="GS_PARASITE",this.parasiteRoot.addEventListener("GS_CLIENT",this.handle,{capture:!0}),document.documentElement.appendChild(this.parasite),this.parasite.dispatchEvent(new CustomEvent("GS_INIT"))}));!function(){if(r=null!==(t=r)&&void 0!==t?t:navigator.userAgent.includes("Firefox/")){if(window.loadedGsCtx)return;window.loadedGsCtx=!0,function(){if(document.domain.includes("soundcloud.com")){var t=AudioContext.prototype.createMediaElementSource;AudioContext.prototype.createMediaElementSource=function(){return t.apply(this,[document.createElement("audio")])}}}()}var t;!function(){var t,e,a;if(location.hostname.includes("pan.baidu.com")){var n,r=navigator.userAgent;if(parseFloat(null===(t=/^Mozilla\/\d.0 \(.*Windows NT ([\d.]+)[;)].*$/.exec(r))||void 0===t?void 0:t[1])>=10?n=r.replace(/(^Mozilla\/\d.0 \(.*Windows NT )([\d.]+)([;)].*$)/,"$16.3$3"):parseFloat(null===(e=/^.*Mac OS X ([\d_]+).*$/.exec(r))||void 0===e||null===(a=e[1])||void 0===a?void 0:a.split("_").slice(0,2).join("."))>=11.1&&(n=r.replace(/(^.*Mac OS X )([\d_]+)(.*$)/,"$110_15_7$3")),n){var o=Object.getOwnPropertyDescriptor(Navigator.prototype,"userAgent");Object.defineProperty(Navigator.prototype,"userAgent",p(p({},o),{},{get:function(){return n}}))}}}(),d=new w,function(){if(document.domain.includes("bilibili.com")){var t=window.localStorage.getItem;window.localStorage.getItem=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var r=t.apply(this,a);try{if("bwphevc_supported"===a[0]){var o,i=JSON.parse(r);if(i.supported&&(null==i||null===(o=i.info)||void 0===o||!o.isBrowserHEVCTypeSupported))return i.supported=!1,JSON.stringify(i)}}catch(t){}return r},d.set(window.localStorage.getItem,t)}}(),s=new E,u=new S,"www.youtube.com"===location.hostname&&window.addEventListener("timeupdate",(function(){var t,e=document.querySelector("#movie_player");if(e){try{e.getAvailablePlaybackRates().push(16)}catch(t){return}f=function(t){if(y!==t){y=t;try{s.activateFor(1e3),e.setPlaybackRate(t)}catch(t){}}},null===(t=u)||void 0===t||t.send({type:"YT_REQUEST_RATE"})}}),{capture:!0,once:!0}),m(HTMLMediaElement,"play",g),m(HTMLMediaElement,"pause",g),m(HTMLMediaElement,"load",g),m(Element,"createShadowRoot",b),m(Element,"attachShadow",b)}()}();